# 智能交互平台使用手册-对内

AI产品线 智能交互平台-后台接口地址    aicp.teamshub.com  172.18.199.35:10101
AI产品线 智能交互平台-前端访问地址    aift.teamshub.com  172.18.199.35:10102


http://172.18.199.16:18081/#/login
admin/123456789
http://172.18.199.35:7100/page/#/login
admin/admin

分布式配置管理
https://github.com/knightliao/disconf

[TOC]

**测试环境**

`http://172.18.199.35:8090/aicp/`

# 2.API旧版

## 2.1.人脸录入

**接口描述:**  

`在使用智能交互平台，人脸识别能力时前提条件要有人脸识别底库，人脸录入功能用于向人脸库中新增用户`

`应用场景：构建您的人脸库，如会员人脸注册，已有用户补全人脸信息等。`

**调用URL:** 

`http://172.18.199.35:8090/interactiveability/face/faceentry`

**调用方法:**  

`post`

**请求参数:**  

| 参数名   | 类型    | 是否必选 | 参数说明                                             |
| -------- | ------- | -------- | ---------------------------------------------------- |
| groupId  | String  | 是       | 人员分组id                                           |
| image    | String  | 是       | 图片Base64编码,编码后的图片大小不超过2M              |
| name     | String  | 否       | 姓名                                                 |
| sex      | integer | 否       | 性别，1：男，2：女                                   |
| birthday | integer | 否       | 生日20190601                                         |
| province | String  | 否       | 省份                                                 |
| duty     | String  | 否       | 职务                                                 |
| type     | String  | 否       | 人员类别，1：运营商，2：客户，3：内部人员，4：陌生人 |
| imageUrl | String  | 否       | 图片路径                                             |
| idIccid  | String  | 否       | 证件号码                                             |
| custId   | String  | 否       | 客户号码                                             |
| remark   | String  | 否       | 备注信息                                             |

**请求报文示例:**

``` json
{ 
    "groupId":"分组id",
	"image": "base64", 
	"name": "客户姓名",
	"idIccid": "220112****0551",
	"sex":1,
	"idIccid":"119020199000",
	"company":"思特奇",
	"duty":"高工",
	"province":"吉林",
	"type":1,
	"remark": "备注"
}
```

**调用示例:**

``` json
curl -X "POST" "http://172.18.199.35:8090/InteractiveAbility/face/FaceEntry" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "groupId":"分组id",
			"image": "base64", 
			"cust_name": "客户姓名",
			"id_iccid": "220112****0551",
			"sex":1,
			"birthday":20190607,
			"cust_id":"119020199000",
			"company":"思特奇",
			"duty":"高工",
			"province":"吉林",
			"type":1,
			"remark": "备注"
		}'
```

**返回值描述:**

| 参数名     | 类型    | 参数说明              |
| ---------- | ------- | --------------------- |
| flag       | boolean | 成功失败标识          |
| resultCode | String  | 服务返回码0成功 1失败 |
| message    | String  | 成功或异常描述信息    |
| data       | json    | 人脸返回结果描述      |
| personID   | String  | 人脸id                |

**成功返回示例:**

``` json
{
    "flag": true,
    "resultCode": 0,
    "message": "人脸录入成功",
    "data": {
        "personID": "7825208425084637184"
    }
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "resultCode": 1,
    "message": "80018,extract feature decode pictrue! get feature failed",
    "data": null
}
```

## 2.2.人脸识别



**接口描述:**  

`也称为1:N人脸识别,以图搜人接口,在指定人脸底库中，找到相似度最高的人。且相似度大于指定阈值。作为人脸识别信息返回`  

`应用场景：排队机,大屏识别,云货架等。`

 **调用URL:** 

`http://172.18.199.35:8090/InteractiveAbility/face/FaceRecognition`

**调用方法:**  

`post`

**请求参数:**  

| 参数名  | 类型   | 是否必选 | 参数说明                                |
| ------- | ------ | -------- | --------------------------------------- |
| groupId | String | 是       | 分组id                                  |
| image   | String | 是       | 图片Base64编码,编码后的图片大小不超过2M |

**请求报文示例:**

``` json
{ 
    "groupId":"分组id",
	"image": "图片Base64编码"
}
```

**调用示例:**

``` json
curl -X "POST" "http://172.18.199.35:8090/InteractiveAbility/face/FaceRecognition" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "image": "图片Base64编码",
			"groupId":"分组id"
		}'
```

**返回值描述:**

| 参数名     | 类型       | 参数说明                                         |
| ---------- | ---------- | ------------------------------------------------ |
| flag       | boolean    | 成功失败标识                                     |
| resultCode | String     | 服务处理返回码0成功 1失败                        |
| message    | String     | 成功或异常描述信息                               |
| data       | json对象   | 人脸返回结果描述                                 |
| similarity | BigDecimal | 相似度                                           |
| personID   | String     | 识别出人员id                                     |
| name       | String     | 姓名                                             |
| sex        | integer    | 性别 1：男，2：女                                |
| sexCN      | String     | 性别 男，女                                      |
| birthday   | integer    | 生日20190601                                     |
| province   | String     | 省份                                             |
| duty       | String     | 职务                                             |
| type       | integer    | 人员类别     1:运营商 2:客户 3:内部人员 4:陌生人 |
| typeCN     | String     | 人员类别中文 1:运营商 2:客户 3:内部人员 4:陌生人 |
| imageUrl   | String     | 图片路径                                         |
| idIccid    | String     | 证件号码                                         |
| custId     | String     | 客户号码                                         |
| remark     | String     | 备注信息                                         |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": {
        "personID": "7885694657450508288",
        "faceFlag": "Y",
        "similarity": "0.99933773",
        "personinfo": {
            "id": 4993,
            "personId": "7885694657450508288",
            "name": "客户姓名",
            "sex": 1,
            "sexCN": "男",
            "birthday": 20190601,
            "idIccid": "220112****0551",
            "custId": "119020199000",
            "company": "思特奇",
            "duty": "高工",
            "province": "吉林",
            "imageUrl": "http://172.18.199.35:10100/person/20191118/7884681432723365888.png",
            "type": 1,
            "typeCN": "运营商",
            "remark": "备注"
        }
    }
}
```

**失败返回示例:**

```
{
    "flag": false,
    "resultCode": 1,
    "message": "Base64编码错误或图片原始数据错误或特征图片都为空",
    "data": null
}
```

## 2.3.人证比对

**接口描述:**  

`用于比对多张图片中的人脸相似度并返回两两比对的相似度，可用于判断两张脸是否是同一人的可能性大小。`

`使用场景:人证识别,用户认证`  

**调用URL:** 

`http://172.18.199.35:8090/InteractiveAbility/face/personwitnessratio`

**调用方法:**  

`post`

**请求参数:数组参数**  

| 参数名 | 类型   | 是否必选 | 参数说明         |
| ------ | ------ | -------- | ---------------- |
| image  | String | 是       | 图片A Base64编码 |
| image  | String | 是       | 图片B Base64编码 |

**请求报文示例:**

``` json
[
    {
        "image": "图片A Base64编码"
    },
    {
        "image": "图片B Base64编码"
    }
]

```

**调用示例:**

``` json
curl -X "POST" "http://172.18.199.35:8090/InteractiveAbility/face/personwitnessratio" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'[
			{
				"image": "图片A Base64编码"
			},
			{
				"image": "图片B Base64编码"
			}
		]'

```

**返回值描述:**

| 参数名     | 类型       | 参数说明                            |
| ---------- | ---------- | ----------------------------------- |
| flag       | boolean    | 成功失败标识                        |
| resultCode | String     | 服务处理返回码0成功 1失败           |
| message    | String     | 成功或异常描述信息                  |
| data       | json对象   | 人脸返回结果描述                    |
| onePerson  | String     | 识别结果: "true"是一个人"flase"不是 |
| similarity | BigDecimal | 相似度                              |

**成功返回示例:**

```
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": {
        "onePerson": "true",
        "similarity": "0.9444"
    }
}
```

**失败返回示例:**

```
{
    "flag": false,
    "resultCode": 1,
    "message": "Base64编码错误或图片原始数据错误或特征图片都为空",
    "data": null
}

```

# 3.API新版

## 3.1.人脸录入

**接口描述:**  

`在使用智能交互平台，人脸识别能力时前提条件要有人脸识别底库，人脸录入功能用于向人脸库中新增用户`

`应用场景：构建您的人脸库，如会员人脸注册，已有用户补全人脸信息等。`

**调用URL:** 

`http://172.18.199.35:8090/aicp/face/add`

**调用方法:**  

`post`

**请求参数:**  

| 参数名   | 类型    | 是否必选 | 参数说明                                             |
| -------- | ------- | -------- | ---------------------------------------------------- |
| groupId  | String  | 是       | 人员分组id                                           |
| image    | String  | 是       | 图片Base64编码,编码后的图片大小不超过2M              |
| name     | String  | 否       | 姓名                                                 |
| sex      | integer | 否       | 性别，1：男，2：女                                   |
| birthday | integer | 否       | 生日20190601                                         |
| province | String  | 否       | 省份                                                 |
| duty     | String  | 否       | 职务                                                 |
| type     | String  | 否       | 人员类别，1：运营商，2：客户，3：内部人员，4：陌生人 |
| idIccid  | String  | 否       | 证件号码                                             |
| custId   | String  | 否       | 客户号码                                             |
| remark   | String  | 否       | 备注信息                                             |

**请求报文示例:**

``` json
{ 
    "groupId":"分组id",
	"image": "base64", 
	"name": "客户姓名",
	"idIccid": "220112****0551",
	"sex":1,
	"idIccid":"119020199000",
	"company":"思特奇",
	"duty":"高工",
	"province":"吉林",
	"type":1,
	"remark": "备注"
}
```

**调用示例:**

``` json
curl -X "POST" "http://172.18.199.35:8090/InteractiveAbility/face/FaceEntry" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "groupId":"分组id",
			"image": "base64", 
			"cust_name": "客户姓名",
			"id_iccid": "220112****0551",
			"sex":1,
			"birthday":20190607,
			"cust_id":"119020199000",
			"company":"思特奇",
			"duty":"高工",
			"province":"吉林",
			"type":1,
			"remark": "备注"
		}'
```

**返回值描述:**

| 参数名   | 类型    | 参数说明           |
| -------- | ------- | ------------------ |
| flag     | boolean | 成功失败标识       |
| message  | String  | 成功或异常描述信息 |
| data     | json    | 人脸返回结果描述   |
| personID | String  | 人脸id             |

**成功返回示例:**

``` json
{
    "flag": true,
    "message": "人脸录入成功",
    "data": {
        "personID": "7825208425084637184"
    }
}
```

**失败返回示例:**

```
{
    "flag": false,
    "message": "80018,extract feature decode pictrue! get feature failed",
    "data": null
}
```

## 3.2.人脸识别

**接口描述:**  

`也称为1:N人脸识别,以图搜人接口,在指定人脸底库中，找到相似度最高的人。且相似度大于指定阈值。作为人脸识别信息返回`  

`应用场景：排队机,大屏识别,云货架等。`

 **调用URL:** 

`http://172.18.199.35:8090/aicp/face/recognition `

**调用方法:**  

`post`

**请求参数:**  

| 参数名  | 类型   | 是否必选 | 参数说明                                |
| ------- | ------ | -------- | --------------------------------------- |
| groupId | String | 是       | 分组id                                  |
| image   | String | 是       | 图片Base64编码,编码后的图片大小不超过2M |

**请求报文示例:**

``` json
{ 
    "groupId":"分组id",
	"image": "图片Base64编码"
}
```

**调用示例:**

``` json
curl -X "POST" "http://172.18.199.35:8090/InteractiveAbility/face/FaceRecognition" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "image": "图片Base64编码",
			"groupId":"分组id"
		}'
```

**返回值描述:**

| 参数名     | 类型       | 参数说明                                         |
| ---------- | ---------- | ------------------------------------------------ |
| flag       | boolean    | 成功失败标识                                     |
| message    | String     | 成功或异常描述信息                               |
| data       | json对象   | 人脸返回结果描述                                 |
| similarity | BigDecimal | 相似度                                           |
| personID   | String     | 识别出人员id                                     |
| name       | String     | 姓名                                             |
| sex        | integer    | 性别 1：男，2：女                                |
| sexCN      | String     | 性别 男，女                                      |
| birthday   | integer    | 生日20190601                                     |
| province   | String     | 省份                                             |
| duty       | String     | 职务                                             |
| type       | integer    | 人员类别     1:运营商 2:客户 3:内部人员 4:陌生人 |
| typeCN     | String     | 人员类别中文 1:运营商 2:客户 3:内部人员 4:陌生人 |
| imageUrl   | String     | 图片路径                                         |
| idIccid    | String     | 证件号码                                         |
| custId     | String     | 客户号码                                         |
| remark     | String     | 备注信息                                         |

**成功返回示例:**

```json
{
    "flag": true,
    "message": "系统处理正常",
    "data": {
        "personID": "7885694657450508288",
        "faceFlag": "Y",
        "similarity": "0.99933773",
        "personinfo": {
            "id": 4993,
            "personId": "7885694657450508288",
            "name": "客户姓名",
            "sex": 1,
            "sexCN": "男",
            "birthday": 20190601,
            "idIccid": "220112****0551",
            "custId": "119020199000",
            "company": "思特奇",
            "duty": "高工",
            "province": "吉林",
            "imageUrl": "http://172.18.199.35:10100/person/20191118/7884681432723365888.png",
            "type": 1,
            "typeCN": "运营商",
            "remark": "备注"
        }
    }
}
```

**失败返回示例:**

```
{
    "flag": false,
    "message": "Base64编码错误或图片原始数据错误或特征图片都为空",
    "data": null
}
```

## 3.3.人证比对

**接口描述:**  

`用于比对多张图片中的人脸相似度并返回两两比对的相似度，可用于判断两张脸是否是同一人的可能性大小。`

`使用场景:人证识别,用户认证`  

**调用URL:** 

`http://172.18.199.35:8090/aicp/face/couple `

**调用方法:**  

`post`

**请求参数:数组参数**  

| 参数名 | 类型   | 是否必选 | 参数说明         |
| ------ | ------ | -------- | ---------------- |
| imageA | String | 是       | 图片A Base64编码 |
| imageB | String | 是       | 图片B Base64编码 |

**请求报文示例:**

``` json
{
				"imageA": "图片A Base64编码",
                "imageB": "图片B Base64编码"
}

```

**调用示例:**

``` json
curl -X "POST" "http://172.18.199.35:8090/InteractiveAbility/face/personwitnessratio" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{
				"imageA": "图片A Base64编码",
                "imageB": "图片B Base64编码"
}'

```

**返回值描述:**

| 参数名     | 类型       | 参数说明                            |
| ---------- | ---------- | ----------------------------------- |
| flag       | boolean    | 成功失败标识                        |
| message    | String     | 成功或异常描述信息                  |
| data       | json对象   | 人脸返回结果描述                    |
| onePerson  | String     | 识别结果: "true"是一个人"flase"不是 |
| similarity | BigDecimal | 相似度                              |

**成功返回示例:**

```json
{
    "flag": true,
    "message": "系统处理正常",
    "data": {
        "onePerson": "true",
        "similarity": "0.9444"
    }
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "Base64编码错误或图片原始数据错误或特征图片都为空",
    "data": null
}

```

## 3.4.人脸删除

**接口描述:**  

`根据人员分组和人员id删除人脸底库中的人脸信息`  

**调用URL:** 
`http://172.18.199.35:8090/aicp/face/remove`

**调用方法:**  

`post`

**请求参数:**  

| 参数名  | 类型   | 是否必选 | 参数说明     |
| ------- | ------ | -------- | ------------ |
| groupId | String | 是       | 分组id       |
| userId  | String | 是       | 待删除人员id |

**请求报文示例:**

``` json
{
	"groupId":"分组id",
	"userId":"用户id"
}
```

**调用示例:**

``` json
curl -X POST \
  http://172.18.199.35:8090/aicp/face/remove \
  -H 'Content-Type: application/json' \
  -d '{
	"groupId":"分组id",
	"userId":"用户id"
}'
```

**返回值描述:**

| 参数名   | 类型     | 参数说明                           |
| -------- | -------- | ---------------------------------- |
| flag     | boolean  | 成功失败标识                       |
| message  | String   | 成功或异常描述信息                 |
| data     | json对象 | 接口返回数据                       |
| personID | String   | 删除成功用户id，即请求参数中userId |

**成功返回示例:**

```json
{
    "flag": true,
    "message": "系统处理正常",
    "data": {
        "personID": "7887150487247790080"
    }
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "人脸库[200000]删除人脸[7885743058546360320]错误,错误信息[人脸不存在]",
    "data": null
}
```



## 3.5.人脸查询

**接口描述:**  

`根据人员分组和人员id信息查询对应的人员图片信息`  

**调用URL:** 
`http://172.18.199.35:8090/aicp/face/query`

**调用方法:**  

`post`

**请求参数:**  

| 参数名  | 类型   | 是否必选 | 参数说明   |
| ------- | ------ | -------- | ---------- |
| groupId | String | 是       | 用户分组id |
| userId  | String | 是       | 用户id     |

**请求报文示例:**

``` json
{
	"groupId":"填写分组id",
	"userId":"填写用户id"
}
```

**调用示例:**

``` json
curl -X POST \
  http://172.18.199.35:8090/aicp/face/query \
  -H 'Content-Type: application/json' \
  -d '{
	"groupId":"分组id",
	"userId":"用户id"
}'
```

**返回值描述:**

| 参数名    | 类型     | 参数说明           |
| --------- | -------- | ------------------ |
| flag      | boolean  | 成功失败标识       |
| message   | String   | 成功或异常描述信息 |
| data      | json对象 | 接口响应数据       |
| faceDBURL | String   | 人脸图片url地址    |
| personID  | String   | 用户id             |

**成功返回示例:**

```json
{
    "flag": true,
    "message": "系统处理正常",
    "data": {
        "faceDBURL": "http://172.18.199.35:7100/face/getimage?app_id=system&app_secret=12345&groupId=200000&faceId=55",
        "personID": "7885746467177529344",
        "faceId": "55"
    }
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "查询人脸错误,错误信息[record not found]",
    "data": null
}
```



## 3.6.图片质量检测

**接口描述:**  

`对图片中人脸的质量进行检测，返回质量评分`  

**调用URL:** 
`http://172.18.199.35:8090/aicp/face/quality`

**调用方法:**  

`post`

**请求参数:**  

| 参数名 | 类型   | 是否必选 | 参数说明                                |
| ------ | ------ | -------- | --------------------------------------- |
| image  | String | 是       | 图片Base64编码,编码后的图片大小不超过2M |

**请求报文示例:**

``` json
{ 
	"image": "图片Base64编码"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.199.35:8090/aicp/face/quality" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "image": "图片Base64编码" 
		}'
```

**返回值描述:**

| 参数名        | 类型       | 参数说明                        |
| ------------- | ---------- | ------------------------------- |
| flag          | boolean    | 成功失败标识                    |
| message       | String     | 成功或异常描述信息              |
| data          | json对象   | 接口返回数据                    |
| qualityFlag   | String     | 图片质量是否合格：Y合格 N不合格 |
| feature       | String     | 图片特征                        |
| qualityScores | BigDecimal | 图片质量得分                    |

**成功返回示例:**

```json
{
    "flag": true,
    "message": "系统处理正常",
    "data": {
        "qualityFlag": "Y",
        "feature": "goWpvcJK1DzuW....CAACAPw==",
        "qualityScores": "0.7373"
    }
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "80018,extract feature decode pictrue! get feature failed",
    "data": null
}
```

# 4.第三方引擎API

## 4.1考拉悠然

## 4.2云从

# 5.运营模块API

## 5.1 运营服务总次数查询

**接口描述:**  

`查询运营服务的总次数`  

**调用URL:** 
`http://172.18.233.118:8091/method/call`

**调用方法:**  

`post`

**请求参数:**  

| 参数名 | 类型   | 是否必选 | 参数说明                                	|
| ------ | ------ | -------- | ---------------------------------------  |
| call_Name  | String | 否       | 调用方法名称   |
| timeBefore | String | 否       | 查询时间（前） |
| timeAfter  | String | 否       | 查询时间（后） |

**请求报文示例:**

``` json
{ 
	"call_Name":"人脸识别",
	"timeBefore":"2020-01-01",
	"timeAfter":"2020-03-03"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.233.118:8091/method/call" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "call_Name":"人脸识别",
			"timeBefore":"2020-01-01",
			"timeAfter":"2020-03-03" 
		}'
```

**返回值描述:**

| 参数名          | 类型       | 参数说明                        |
| -------------  | ---------- | -------------------------------|
| flag | boolean | 成功失败标识 |
| message | String | 成功或异常描述信息    |
| data | Json对象 | 接口响应数据          |
| traceid  | String     | 唯一标识                |
| username | String | 用户名 |
| visitip   | String     | 访问者的IP             |
| visittime | String     | 访问时间                   |
| visitdesc   | String     | 访问描述              	|
| visiturl | String     | 访问的URL路径 |
| costtime | String     | 服务的处理时长             |
| visitresult | String     | 访问结果  0成功,1失败     |
| visitcode | String     | 访问结果代码            |
| visitmsg | String     | 访问结果的提示信息           |
| visitsource | String     | 访问源       |
| methodname | String     | 方法名                   |
| callcount | String | 方法调用次数 |
| end | String | 结束时间 |
| day | String | 方法起止时间 |
| begin | String | 开始时间 |
| total | String | 总次数 |
| count | String | 方法调用次数 |

**成功返回示例:**

```json
{
    "flag": true,
    "message": "系统处理正常",
    "data": [
        {
            "traceid": null,
            "username": null,
            "visitip": null,
            "visittime": null,
            "visitdesc": null,
            "visiturl": null,
            "costtime": 450,
            "visitresult": null,
            "visitcode": null,
            "visitmsg": "人脸查询",
            "visitsource": "人脸识别(云从)",
            "methodname": "faceQuery",
            "callcount": null,
            "end": null,
            "day": "2020-03-26 13:56:06",
            "begin": null,
            "total": null,
            "count": "1"
        },
        {
            "traceid": null,
            "username": null,
            "visitip": null,
            "visittime": null,
            "visitdesc": null,
            "visiturl": null,
            "costtime": 245,
            "visitresult": null,
            "visitcode": null,
            "visitmsg": "人脸识别",
            "visitsource": "人脸识别(云从)",
            "methodname": "faceRecognition",
            "callcount": null,
            "end": null,
            "day": "2020-04-25 14:43:45",
            "begin": null,
            "total": null,
            "count": "3"
        }
            ]
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "运行时出错!",
    "data": null
}
```
## 5.2 运营服务方法调用次数按日查询

**接口描述:**  

`查询运营服务按日统计的次数`  

**调用URL:** 
`http://172.18.233.118:8091/method/call/getMethodCountByDay`

**调用方法:**  

`post`

**请求参数:**  

| 参数名 | 类型   | 是否必选 | 参数说明                                	|
| ------ | ------ | -------- | ---------------------------------------  |
| call_Name  | String | 否       | 调用方法名称   |
| timeBefore | String | 否       | 查询时间（前） |
| timeAfter  | String | 否       | 查询时间（后） |

**请求报文示例:**

``` json
{ 
	"call_Name":"人脸识别",
	"timeBefore":"2020-01-01",
	"timeAfter":"2020-03-03"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.233.118:8091/method/call/getMethodCountByDay" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "call_Name":"人脸识别",
			"timeBefore":"2020-01-01",
			"timeAfter":"2020-03-03" 
		}'
```

**返回值描述:**

| 参数名      | 类型     | 参数说明              |
| ----------- | -------- | --------------------- |
| flag        | boolean  | 成功失败标识          |
| message     | String   | 成功或异常描述信息    |
| data        | Json对象 | 接口响应数据          |
| traceid     | String   | 唯一标识              |
| username    | String   | 用户名                |
| visitip     | String   | 访问者的IP            |
| visittime   | String   | 访问时间              |
| visitdesc   | String   | 访问描述              |
| visiturl    | String   | 访问的URL路径         |
| costtime    | String   | 服务的处理时长        |
| visitresult | String   | 访问结果  0成功,1失败 |
| visitcode   | String   | 访问结果代码          |
| visitmsg    | String   | 访问结果的提示信息    |
| visitsource | String   | 访问源                |
| methodname  | String   | 方法名                |
| callcount   | String   | 方法调用次数          |
| end         | String   | 结束时间              |
| day         | String   | 方法起止时间          |
| begin       | String   | 开始时间              |
| total       | String   | 总次数                |
| count       | String   | 方法调用次数          |

**成功返回示例:**

```json
{
    "flag": true,
    "message": "系统处理正常",
    "data": [
        {
            "traceid": null,
            "username": null,
            "visitip": null,
            "visittime": null,
            "visitdesc": null,
            "visiturl": null,
            "costtime": 450,
            "visitresult": null,
            "visitcode": null,
            "visitmsg": "人脸查询",
            "visitsource": "人脸识别(云从)",
            "methodname": "faceQuery",
            "callcount": null,
            "end": "2020-03-27",
            "day": "2020-03-26~~~2020-03-27",
            "begin": "2020-03-26",
            "total": null,
            "count": "1"
        },
        {
            "traceid": null,
            "username": null,
            "visitip": null,
            "visittime": null,
            "visitdesc": null,
            "visiturl": null,
            "costtime": 1283,
            "visitresult": null,
            "visitcode": null,
            "visitmsg": "人脸识别",
            "visitsource": "人脸识别(云从)",
            "methodname": "faceRecognition",
            "callcount": null,
            "end": "2020-03-27",
            "day": "2020-03-26~~~2020-03-27",
            "begin": "2020-03-26",
            "total": null,
            "count": "2"
        }
    ]
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "运行时出错!",
    "data": null
}
```
## 5.3 运营服务方法调用次数按周查询

**接口描述:**  

`查询运营服务按周统计的次数`  

**调用URL:** 
`http://172.18.233.118:8091/method/call/getMethodCountByWeek`

**调用方法:**  

`post`

**请求参数:**  

| 参数名 | 类型   | 是否必选 | 参数说明                                	|
| ------ | ------ | -------- | ---------------------------------------  |
| call_Name  | String | 否       | 调用方法名称   |
| timeBefore | String | 否       | 查询时间（前） |
| timeAfter  | String | 否       | 查询时间（后） |

**请求报文示例:**

``` json
{ 
	"call_Name":"人脸识别",
	"timeBefore":"2020-01-01",
	"timeAfter":"2020-03-03"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.233.118:8091/method/call/getMethodCountByWeek" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "call_Name":"人脸识别",
			"timeBefore":"2020-01-01",
			"timeAfter":"2020-03-03" 
		}'
```

**返回值描述:**

| 参数名      | 类型     | 参数说明              |
| ----------- | -------- | --------------------- |
| flag        | boolean  | 成功失败标识          |
| message     | String   | 成功或异常描述信息    |
| data        | Json对象 | 接口响应数据          |
| traceid     | String   | 唯一标识              |
| username    | String   | 用户名                |
| visitip     | String   | 访问者的IP            |
| visittime   | String   | 访问时间              |
| visitdesc   | String   | 访问描述              |
| visiturl    | String   | 访问的URL路径         |
| costtime    | String   | 服务的处理时长        |
| visitresult | String   | 访问结果  0成功,1失败 |
| visitcode   | String   | 访问结果代码          |
| visitmsg    | String   | 访问结果的提示信息    |
| visitsource | String   | 访问源                |
| methodname  | String   | 方法名                |
| callcount   | String   | 方法调用次数          |
| end         | String   | 结束时间              |
| day         | String   | 方法起止时间          |
| begin       | String   | 开始时间              |
| total       | String   | 总次数                |
| count       | String   | 方法调用次数          |

**成功返回示例:**

```json
{
    "flag": true,
    "message": "系统处理正常",
    "data": [
        {
            "traceid": null,
            "username": null,
            "visitip": null,
            "visittime": null,
            "visitdesc": null,
            "visiturl": null,
            "costtime": 450,
            "visitresult": null,
            "visitcode": null,
            "visitmsg": "人脸查询",
            "visitsource": "人脸识别(云从)",
            "methodname": "faceQuery",
            "callcount": null,
            "end": "2020-03-29",
            "day": "2020-03-23~~~2020-03-29",
            "begin": "2020-03-23",
            "total": null,
            "count": "1"
        },
        {
            "traceid": null,
            "username": null,
            "visitip": null,
            "visittime": null,
            "visitdesc": null,
            "visiturl": null,
            "costtime": 1283,
            "visitresult": null,
            "visitcode": null,
            "visitmsg": "人脸识别",
            "visitsource": "人脸识别(云从)",
            "methodname": "faceRecognition",
            "callcount": null,
            "end": "2020-03-29",
            "day": "2020-03-23~~~2020-03-29",
            "begin": "2020-03-23",
            "total": null,
            "count": "2"
        }
    ]
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "运行时出错!",
    "data": null
}
```
## 5.4 运营服务方法调用次数按月查询

**接口描述:**  

`查询运营服务按月统计的次数`  

**调用URL:** 
`http://172.18.233.118:8091/method/call/getMethodCountByMonth`

**调用方法:**  

`post`

**请求参数:**  

| 参数名 | 类型   | 是否必选 | 参数说明                                	|
| ------ | ------ | -------- | ---------------------------------------  |
| call_Name  | String | 否       | 调用方法名称   |
| timeBefore | String | 否       | 查询时间（前） |
| timeAfter  | String | 否       | 查询时间（后） |

**请求报文示例:**

``` json
{ 
	"call_Name":"人脸识别",
	"timeBefore":"2020-01-01",
	"timeAfter":"2020-03-03"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.233.118:8091/method/call/getMethodCountByMonth" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "call_Name":"人脸识别",
			"timeBefore":"2020-01-01",
			"timeAfter":"2020-03-03" 
		}'
```

**返回值描述:**

| 参数名      | 类型     | 参数说明              |
| ----------- | -------- | --------------------- |
| flag        | boolean  | 成功失败标识          |
| message     | String   | 成功或异常描述信息    |
| data        | Json对象 | 接口响应数据          |
| traceid     | String   | 唯一标识              |
| username    | String   | 用户名                |
| visitip     | String   | 访问者的IP            |
| visittime   | String   | 访问时间              |
| visitdesc   | String   | 访问描述              |
| visiturl    | String   | 访问的URL路径         |
| costtime    | String   | 服务的处理时长        |
| visitresult | String   | 访问结果  0成功,1失败 |
| visitcode   | String   | 访问结果代码          |
| visitmsg    | String   | 访问结果的提示信息    |
| visitsource | String   | 访问源                |
| methodname  | String   | 方法名                |
| callcount   | String   | 方法调用次数          |
| end         | String   | 结束时间              |
| day         | String   | 方法起止时间          |
| begin       | String   | 开始时间              |
| total       | String   | 总次数                |
| count       | String   | 方法调用次数          |

**成功返回示例:**

```json
{
    "flag": true,
    "message": "系统处理正常",
    "data": [
        {
            "traceid": null,
            "username": null,
            "visitip": null,
            "visittime": null,
            "visitdesc": null,
            "visiturl": null,
            "costtime": 450,
            "visitresult": null,
            "visitcode": null,
            "visitmsg": "人脸查询",
            "visitsource": "人脸识别(云从)",
            "methodname": "faceQuery",
            "callcount": null,
            "end": "2020-03-31",
            "day": "2020-03-01~~~2020-03-31",
            "begin": "2020-03-01",
            "total": null,
            "count": "1"
        },
        {
            "traceid": null,
            "username": null,
            "visitip": null,
            "visittime": null,
            "visitdesc": null,
            "visiturl": null,
            "costtime": 1283,
            "visitresult": null,
            "visitcode": null,
            "visitmsg": "人脸识别",
            "visitsource": "人脸识别(云从)",
            "methodname": "faceRecognition",
            "callcount": null,
            "end": "2020-03-31",
            "day": "2020-03-01~~~2020-03-31",
            "begin": "2020-03-01",
            "total": null,
            "count": "2"
        }
    ]
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "运行时出错!",
    "data": null
}
```
## 5.5 运营服务方法调用次数按日查询(图表)

**接口描述:**  

`查询运营服务按日统计的次数(图表)`  

**调用URL:** 
`http://172.18.233.118:8091/method/call/getChartByDay`

**调用方法:**  

`post`

**请求参数:**  

| 参数名 | 类型   | 是否必选 | 参数说明                                	|
| ------ | ------ | -------- | ---------------------------------------  |
| time  | String | 否       | 年份和月份   |


**请求报文示例:**

``` json
{
	"time":"2020-02"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.233.118:8091/method/call/getChartByDay" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "time":"2020-02" 
		}'
```

**返回值描述:**

| 参数名      | 类型     | 参数说明              |
| ----------- | -------- | --------------------- |
| flag        | boolean  | 成功失败标识          |
| message     | String   | 成功或异常描述信息    |
| data        | Json对象 | 接口响应数据          |
| traceid     | String   | 唯一标识              |
| username    | String   | 用户名                |
| visitip     | String   | 访问者的IP            |
| visittime   | String   | 访问时间              |
| visitdesc   | String   | 访问描述              |
| visiturl    | String   | 访问的URL路径         |
| costtime    | String   | 服务的处理时长        |
| visitresult | String   | 访问结果  0成功,1失败 |
| visitcode   | String   | 访问结果代码          |
| visitmsg    | String   | 访问结果的提示信息    |
| visitsource | String   | 访问源                |
| methodname  | String   | 方法名                |
| callcount   | String   | 方法调用次数          |
| end         | String   | 结束时间              |
| day         | String   | 方法起止时间          |
| begin       | String   | 开始时间              |
| total       | String   | 总次数                |
| count       | String   | 方法调用次数          |

**成功返回示例:**

```json
{
    "flag": true,
    "message": "系统处理正常",
    "data": [
        [
            {
                "traceid": null,
                "username": null,
                "visitip": null,
                "visittime": null,
                "visitdesc": null,
                "visiturl": null,
                "costtime": 450,
                "visitresult": null,
                "visitcode": null,
                "visitmsg": "人脸查询",
                "visitsource": "人脸识别(云从)",
                "methodname": "faceQuery",
                "callcount": null,
                "end": null,
                "day": "2020-03-26",
                "begin": null,
                "total": "31",
                "count": "1"
            }
        ],
        [
            {
                "traceid": null,
                "username": null,
                "visitip": null,
                "visittime": null,
                "visitdesc": null,
                "visiturl": null,
                "costtime": 1283,
                "visitresult": null,
                "visitcode": null,
                "visitmsg": "人脸识别",
                "visitsource": "人脸识别(云从)",
                "methodname": "faceRecognition",
                "callcount": null,
                "end": null,
                "day": "2020-03-26",
                "begin": null,
                "total": "31",
                "count": "2"
            }
        ],
        [
            {
                "traceid": null,
                "username": null,
                "visitip": null,
                "visittime": null,
                "visitdesc": null,
                "visiturl": null,
                "costtime": 1420,
                "visitresult": null,
                "visitcode": null,
                "visitmsg": "图片质量检测",
                "visitsource": "人脸识别(云从)",
                "methodname": "imageQualityScores",
                "callcount": null,
                "end": null,
                "day": "2020-03-25",
                "begin": null,
                "total": "31",
                "count": "3"
            }
        ],
        [
            {
                "traceid": null,
                "username": null,
                "visitip": null,
                "visittime": null,
                "visitdesc": null,
                "visiturl": null,
                "costtime": 1983,
                "visitresult": null,
                "visitcode": null,
                "visitmsg": "人证对比",
                "visitsource": "人脸识别(云从)",
                "methodname": "personWitnessRatio",
                "callcount": null,
                "end": null,
                "day": "2020-03-26",
                "begin": null,
                "total": "31",
                "count": "3"
            }
        ]
    ]
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "运行时出错!",
    "data": null
}
```
## 5.6 运营服务方法调用次数按月查询(图表)

**接口描述:**  

`查询运营服务按月统计的次数(图表)`  

**调用URL:** 
`http://172.18.233.118:8091/method/call/getChartByMonth`

**调用方法:**  

`post`

**请求参数:**  

| 参数名 | 类型   | 是否必选 | 参数说明                                	|
| ------ | ------ | -------- | ---------------------------------------  |
| year  | String | 否       | 年份   |

**请求报文示例:**

``` json
{ 
	"year":"2020"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.233.118:8091/method/call/getChartByMonth" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "year":"2020"
		}'
```

**返回值描述:**

| 参数名      | 类型     | 参数说明              |
| ----------- | -------- | --------------------- |
| flag        | boolean  | 成功失败标识          |
| message     | String   | 成功或异常描述信息    |
| data        | Json对象 | 接口响应数据          |
| traceid     | String   | 唯一标识              |
| username    | String   | 用户名                |
| visitip     | String   | 访问者的IP            |
| visittime   | String   | 访问时间              |
| visitdesc   | String   | 访问描述              |
| visiturl    | String   | 访问的URL路径         |
| costtime    | String   | 服务的处理时长        |
| visitresult | String   | 访问结果  0成功,1失败 |
| visitcode   | String   | 访问结果代码          |
| visitmsg    | String   | 访问结果的提示信息    |
| visitsource | String   | 访问源                |
| methodname  | String   | 方法名                |
| callcount   | String   | 方法调用次数          |
| end         | String   | 结束时间              |
| day         | String   | 方法起止时间          |
| begin       | String   | 开始时间              |
| total       | String   | 总次数                |
| count       | String   | 方法调用次数          |

**成功返回示例:**

```json
{
    "flag": true,
    "message": "系统处理正常",
    "data": [
        [
            {
                "traceid": null,
                "username": null,
                "visitip": null,
                "visittime": null,
                "visitdesc": null,
                "visiturl": null,
                "costtime": 450,
                "visitresult": null,
                "visitcode": null,
                "visitmsg": "人脸查询",
                "visitsource": "人脸识别(云从)",
                "methodname": "faceQuery",
                "callcount": null,
                "end": null,
                "day": "2020-03",
                "begin": null,
                "total": null,
                "count": "1"
            }
        ],
        [
            {
                "traceid": null,
                "username": null,
                "visitip": null,
                "visittime": null,
                "visitdesc": null,
                "visiturl": null,
                "costtime": 1283,
                "visitresult": null,
                "visitcode": null,
                "visitmsg": "人脸识别",
                "visitsource": "人脸识别(云从)",
                "methodname": "faceRecognition",
                "callcount": null,
                "end": null,
                "day": "2020-03",
                "begin": null,
                "total": null,
                "count": "2"
            },
            {
                "traceid": null,
                "username": null,
                "visitip": null,
                "visittime": null,
                "visitdesc": null,
                "visiturl": null,
                "costtime": 245,
                "visitresult": null,
                "visitcode": null,
                "visitmsg": "人脸识别",
                "visitsource": "人脸识别(云从)",
                "methodname": "faceRecognition",
                "callcount": null,
                "end": null,
                "day": "2020-04",
                "begin": null,
                "total": null,
                "count": "1"
            }
        ],
        [
            {
                "traceid": null,
                "username": null,
                "visitip": null,
                "visittime": null,
                "visitdesc": null,
                "visiturl": null,
                "costtime": 1420,
                "visitresult": null,
                "visitcode": null,
                "visitmsg": "图片质量检测",
                "visitsource": "人脸识别(云从)",
                "methodname": "imageQualityScores",
                "callcount": null,
                "end": null,
                "day": "2020-03",
                "begin": null,
                "total": null,
                "count": "3"
            },
            {
                "traceid": null,
                "username": null,
                "visitip": null,
                "visittime": null,
                "visitdesc": null,
                "visiturl": null,
                "costtime": 348,
                "visitresult": null,
                "visitcode": null,
                "visitmsg": "图片质量检测",
                "visitsource": "人脸识别(云从)",
                "methodname": "imageQualityScores",
                "callcount": null,
                "end": null,
                "day": "2020-04",
                "begin": null,
                "total": null,
                "count": "1"
            }
        ],
        [
            {
                "traceid": null,
                "username": null,
                "visitip": null,
                "visittime": null,
                "visitdesc": null,
                "visiturl": null,
                "costtime": 1983,
                "visitresult": null,
                "visitcode": null,
                "visitmsg": "人证对比",
                "visitsource": "人脸识别(云从)",
                "methodname": "personWitnessRatio",
                "callcount": null,
                "end": null,
                "day": "2020-03",
                "begin": null,
                "total": null,
                "count": "3"
            }
        ]
    ]
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "运行时出错!",
    "data": null
}
```
## 5.7 运营服务时长查询

**接口描述:**  

`查询运营服务的时长`  

**调用URL:** 
`http://172.18.233.118:8091/method/call/all`

**调用方法:**  

`post`

**请求参数:**  

| 参数名 | 类型   | 是否必选 | 参数说明                                	|
| ------ | ------ | -------- | ---------------------------------------  |
| call_Name  | String | 否       | 调用方法名称   |
| timeBefore | String | 否       | 查询时间（前） |
| timeAfter  | String | 否       | 查询时间（后） |

**请求报文示例:**

``` json
{ 
	"call_Name":"人脸识别",
	"timeBefore":"2020-01-01",
	"timeAfter":"2020-03-03"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.233.118:8091/method/call/all" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "call_Name":"人脸识别",
			"timeBefore":"2020-01-01",
			"timeAfter":"2020-03-03" 
		}'
```

**返回值描述:**

| 参数名      | 类型     | 参数说明              |
| ----------- | -------- | --------------------- |
| flag        | boolean  | 成功失败标识          |
| message     | String   | 成功或异常描述信息    |
| data        | Json对象 | 接口响应数据          |
| traceid     | String   | 唯一标识              |
| username    | String   | 用户名                |
| visitip     | String   | 访问者的IP            |
| visittime   | String   | 访问时间              |
| visitdesc   | String   | 访问描述              |
| visiturl    | String   | 访问的URL路径         |
| costtime    | String   | 服务的处理时长        |
| visitresult | String   | 访问结果  0成功,1失败 |
| visitcode   | String   | 访问结果代码          |
| visitmsg    | String   | 访问结果的提示信息    |
| visitsource | String   | 访问源                |
| methodname  | String   | 方法名                |
| callcount   | String   | 方法调用次数          |
| end         | String   | 结束时间              |
| day         | String   | 方法起止时间          |
| begin       | String   | 开始时间              |
| total       | String   | 总次数                |
| count       | String   | 方法调用次数          |

**成功返回示例:**

```json
{
    "flag": true,
    "message": "系统处理正常",
    "data": [
        {
            "traceid": null,
            "username": null,
            "visitip": null,
            "visittime": null,
            "visitdesc": null,
            "visiturl": null,
            "costtime": 450,
            "visitresult": null,
            "visitcode": null,
            "visitmsg": "人脸查询",
            "visitsource": "人脸识别(云从)",
            "methodname": "faceQuery",
            "callcount": null,
            "end": null,
            "day": "2020-03-26 13:56:06",
            "begin": null,
            "total": null,
            "count": "1"
        },
        {
            "traceid": null,
            "username": null,
            "visitip": null,
            "visittime": null,
            "visitdesc": null,
            "visiturl": null,
            "costtime": 245,
            "visitresult": null,
            "visitcode": null,
            "visitmsg": "人脸识别",
            "visitsource": "人脸识别(云从)",
            "methodname": "faceRecognition",
            "callcount": null,
            "end": null,
            "day": "2020-04-25 14:43:45",
            "begin": null,
            "total": null,
            "count": "1"
        }
    ]
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "运行时出错!",
    "data": null
}
```



# 6.授权模块API

## 6.1 能力授权

**接口描述:**  

`对用户授权对应的能力，返回拥有用户信息的token`  

**调用URL:** 
`http://172.18.199.14:9012/authorize/grantAuthorize`

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名            | 类型   | 是否必选 | 参数说明       |
| ----------------- | ------ | -------- | -------------- |
| appId             | String | 是       | 用户id         |
| dueTime           | String | 是       | 授权到期时间   |
| capabilityIdArray | Array  | 是       | 授权能力ID数组 |

**请求报文示例:**

``` json
{
	"appId":"testan",
    "dueTime":"2020-11-11 00:00:00",
    "capabilityIdArray":["C10000000001,C10000000002"]
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.199.14:9012/authorize/grantAuthorize" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ 
	"appId":"testan",
    "dueTime":"2020-11-11 00:00:00",
    "capabilityIdArray":["C10000000001,C10000000002"]
		}'
```

**返回值描述:**

| 参数名     | 类型     | 参数说明                |
| ---------- | -------- | ----------------------- |
| flag       | boolean  | 成功失败标识            |
| resultCode | int      | 成功失败状态码          |
| message    | String   | 成功或异常描述信息      |
| data       | json对象 | 接口返回数据            |
| appId      | String   | 用户ID                  |
| dueTime    | String   | 授权到期时间            |
| token      | String   | 包含用户授权能力的token |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": {
        "appId": "testan",
        "dueTime": "2020-11-11 00:00:00",
        "token": "DU/mHOzoR4it4ljQFugDcA=="
    }
}
```

**失败返回示例:**

```json
{
    "timestamp": "2020-04-04T08:22:51.121+0000",
    "status": 500,
    "error": "Internal Server Error",
    "message": "当前授权用户已存在",
    "path": "/authorize/grantAuthorize"
}
```



## 6.2 授权更新

**接口描述:**  

`对用户授权对应的能力进行更新`  

**调用URL:** 
`http://172.18.199.14:9012/authorize/updateAuthorize`

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名            | 类型   | 是否必选 | 参数说明       |
| ----------------- | ------ | -------- | -------------- |
| appId             | String | 是       | 用户id         |
| dueTime           | String | 是       | 授权到期时间   |
| capabilityIdArray | Array  | 是       | 授权能力ID数组 |

**请求报文示例:**

``` json
{
	"appId":"testan",
	"dueTime":"2099-10-28 00:00:00",
	"capabilityIdArray":["C10000000001,C10000000002,C10000000003"]
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.199.14/authorize/updateAuthorize" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{
	"appId":"testan",
	"dueTime":"2099-10-28 00:00:00",
	"capabilityIdArray":["C10000000001,C10000000002,C10000000003"]
}'
```

**返回值描述:**

| 参数名         | 类型     | 参数说明                |
| -------------- | -------- | ----------------------- |
| flag           | boolean  | 成功失败标识            |
| resultCode     | int      | 成功失败状态码          |
| message        | String   | 成功或异常描述信息      |
| data           | json对象 | 接口返回数据            |
| existAuthorize | String   | 已存在的能力            |
| addAuthorize   | String   | 新增的能力              |
| appId          | String   | 用户id                  |
| token          | String   | 包含用户授权能力的token |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": {
        "existAuthorize": "[C10000000001, C10000000002]",
        "addAuthorize": "[C10000000003]",
        "appId": "testan",
        "token": "DU/mHOzoR4it4ljQFugDcA=="
    }
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "运行时出错!",
    "data": null
}
```



## 6.3 授权用户删除

**接口描述:**  

`对授权用户删除`  

**调用URL:** 
`http://172.18.199.14:9012/authorize/deleteAuthorizedUser`

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| appId  | String | 是       | 用户Id   |

**请求报文示例:**

``` json
{
	"appId":"testan"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.199.14/authorize/saveOrUpdateAuthorize" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "appId":"testan
		}'
```

**返回值描述:**

| 参数名     | 类型     | 参数说明           |
| ---------- | -------- | ------------------ |
| flag       | boolean  | 成功失败标识       |
| resultCode | int      | 成功失败状态码     |
| message    | String   | 成功或异常描述信息 |
| data       | json对象 | 接口返回数据       |
| appId      | String   | 用户id             |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": {
        "appId": "testan"
    }
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "resultCode": 1,
    "message": "该用户不存在",
    "data": null
}
```



# 7.微服务API

## 7.1.人脸底库添加

**接口描述:**  

`在使用智能交互平台，人脸底库是对人脸进行管理`

**调用URL:** 

`http://172.18.233.118:9012/aicp/face/addBase`

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名  | 类型   | 是否必选 | 参数说明     |
| ------- | ------ | -------- | ------------ |
| groupId | String | 是       | 人员分组id   |
| dbName  | String | 是       | 人脸底库名称 |
| dbDesc  | String | 否       | 人脸底库描述 |

**请求报文示例:**

``` json
{ 
    "groupId":"200000",
	"dbName":"sitechTest2",
	"dbDesc":"This is sitechTest"
}
```

**调用示例:**

``` json
curl -X "POST" "http://172.18.233.118:9012/aicp/face/addBase" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ 
	"groupId":"200000",
	"dbName":"sitechTest2",
	"dbDesc":"This is sitechTest"
}'
```

**返回值描述:**

| 参数名      | 类型    | 参数说明           |
| ----------- | ------- | ------------------ |
| flag        | boolean | 成功失败标识       |
| message     | String  | 成功或异常描述信息 |
| data        | json    | 人脸返回结果描述   |
| dbDesc      | String  | 人脸底库描述       |
| dbName      | String  | 人脸底库名称       |
| personDbLib | String  | 人脸底库id         |

**成功返回示例:**

``` json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": {
        "dbDesc": "This is sitechTest",
        "dbName": "sitechTest2",
        "personDbLib": "567a4e9469c147c896c478f891bff72d"
    }
}
```

**失败返回示例:**

```
{
    "flag": false,
    "resultCode": 1,
    "message": "服务端报错",
    "data": null
}
```

## 7.2.人脸底库删除

**接口描述:**  

`删除人脸底库`

**调用URL:** 

`http://172.18.233.118:9012/aicp/face/deleteBase`

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名  | 类型   | 是否必选 | 参数说明   |
| ------- | ------ | -------- | ---------- |
| groupId | String | 是       | 人员分组id |

**请求报文示例:**

``` json
{
    "groupId":"200000"
}
```

**调用示例:**

``` json
curl -X "POST" "http://172.18.233.118:9012/aicp/face/remove" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{
    "groupId":"200000"
}'
```

**返回值描述:**

| 参数名  | 类型    | 参数说明           |
| ------- | ------- | ------------------ |
| flag    | boolean | 成功失败标识       |
| message | String  | 成功或异常描述信息 |
| data    | json    | 人脸返回结果描述   |
| message | String  | 返回成功信息       |

**成功返回示例:**

``` json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": {
        "message": "ok"
    }
}
```

**失败返回示例:**

```
{
    "flag": false,
    "resultCode": 1,
    "message": "服务端报错",
    "data": null
}
```



## 7.3.人脸底库查询

**接口描述:**  

`查询所有的底库`

**调用URL:** 

`http://172.18.233.118:9012/aicp/face/queryBaseAll`

**调用方法:**  

post

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名   | 类型   | 是否必选 | 参数说明 |
| -------- | ------ | -------- | -------- |
| pageNo   | String | 是       | 分页页数 |
| pageSize | String | 是       | 分页个数 |

**请求报文示例:**

``` json
{
	"pageNo":"1",
	"pageSize":"20"
}
```

**调用示例:**

``` json
curl -X "POST" "http://172.18.233.118:9012/aicp/face/queryBaseAll" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{
    "groupId":"200000"
}'
```

**返回值描述:**

| 参数名      | 类型     | 参数说明         |
| ----------- | -------- | ---------------- |
| flag        | boolean  | 成功失败标识     |
| resultCode  | Integer  | 结果代码         |
| data        | json     | 人脸返回结果描述 |
| records     | objcet[] | 人像库数组对象   |
| dbDesc      | String   | 人脸库描述       |
| dbName      | String   | 人脸库名称       |
| personDbLib | String   | 人脸库ID         |
| id          | String   | 人脸库编号       |

**成功返回示例:**

``` json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": {
        "records": [
            {
                "dbDesc": "This is sitechTest",
                "dbName": "sitechTest1",
                "id": 63,
                "personDbLib": "c4ae5e7845e742b484d39a39e58be85a"
            }
        ]
    }
}
```

**失败返回示例:**

```
{
    "flag": false,
    "resultCode": 1,
    "message": "服务端报错",
    "data": null
}
```

## 7.4.人脸录入

**接口描述:**  

`在使用智能交互平台，人脸识别能力时前提条件要有人脸识别底库，人脸录入功能用于向人脸库中新增用户`

`应用场景：构建您的人脸库，如会员人脸注册，已有用户补全人脸信息等。`

**调用URL:** 

`http://172.18.233.118:9012/aicp/face/add`

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名   | 类型    | 是否必选 | 参数说明                                             |
| -------- | ------- | -------- | ---------------------------------------------------- |
| groupId  | String  | 是       | 人员分组id                                           |
| image    | String  | 是       | 图片Base64编码,编码后的图片大小不超过2M              |
| name     | String  | 否       | 姓名                                                 |
| sex      | integer | 否       | 性别，1：男，2：女                                   |
| birthday | integer | 否       | 生日20190601                                         |
| province | String  | 否       | 省份                                                 |
| duty     | String  | 否       | 职务                                                 |
| type     | String  | 否       | 人员类别，1：运营商，2：客户，3：内部人员，4：陌生人 |
| idIccid  | String  | 否       | 证件号码                                             |
| custId   | String  | 否       | 客户号码                                             |
| remark   | String  | 否       | 备注信息                                             |

**请求报文示例:**

``` json
{ 
    "groupId":"分组id",
	"image": "base64", 
	"name": "客户姓名",
	"idIccid": "220112****0551",
	"sex":1,
	"idIccid":"119020199000",
	"company":"思特奇",
	"duty":"高工",
	"province":"吉林",
	"type":1,
	"remark": "备注"
}
```

**调用示例:**

``` json
curl -X "POST" "http://172.18.233.118:8090/InteractiveAbility/face/FaceEntry" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "groupId":"分组id",
			"image": "base64", 
			"cust_name": "客户姓名",
			"id_iccid": "220112****0551",
			"sex":1,
			"birthday":20190607,
			"cust_id":"119020199000",
			"company":"思特奇",
			"duty":"高工",
			"province":"吉林",
			"type":1,
			"remark": "备注"
		}'
```

**返回值描述:**

| 参数名     | 类型    | 参数说明           |
| ---------- | ------- | ------------------ |
| flag       | boolean | 成功失败标识       |
| resultCode | Integer | 结果代码           |
| message    | String  | 成功或异常描述信息 |
| data       | json    | 人脸返回结果描述   |
| personID   | String  | 人脸id             |
| url        | String  | 人脸图片url地址    |

**成功返回示例:**

``` json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": {
        "personNo": "1b350b97cc944a169426f1b81540c993",
        "url": "http://172.18.199.16:38095/group1/default/20200325/13/40/1/1585114811949?download=0"
    }
}
```

**失败返回示例:**

```
{
    "flag": false,
    "message": "80018,extract feature decode pictrue! get feature failed",
    "data": null
}
```

## 7.5.人脸识别

**接口描述:**  

`也称为1:N人脸识别,以图搜人接口,在指定人脸底库中，找到相似度最高的人。且相似度大于指定阈值。作为人脸识别信息返回`  

`应用场景：排队机,大屏识别,云货架等。`

 **调用URL:** 

`http://172.18.233.118:9012/aicp/face/recognition `

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名  | 类型   | 是否必选 | 参数说明                                |
| ------- | ------ | -------- | --------------------------------------- |
| groupId | String | 是       | 分组id                                  |
| image   | String | 是       | 图片Base64编码,编码后的图片大小不超过2M |

**请求报文示例:**

``` json
{ 
    "groupId":"分组id",
	"image": "图片Base64编码"
}
```

**调用示例:**

``` json
curl -X "POST" "http://172.18.233.118:9012/InteractiveAbility/face/FaceRecognition" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "image": "图片Base64编码",
			"groupId":"分组id"
		}'
```

**返回值描述:**

| 参数名     | 类型     | 参数说明           |
| ---------- | -------- | ------------------ |
| flag       | boolean  | 成功失败标识       |
| resultCode | Integer  | 返回结果代码       |
| message    | String   | 成功或异常描述信息 |
| data       | json对象 | 人脸返回结果描述   |
| records    | Object[] | 人像库数组对象     |
| score      | Float    | 相似程度           |
| id         | String   | id                 |
| faceId     | String   | 人脸ID             |
| personNo   | String   | 人员编号           |
| url        | String   | 人像Url地址        |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": {
        "records": [
            {
                "score": 100.0,
                "id": "1586394103831187000",
                "faceId": "koala-deba4899ff644fa9b7ee3589372ffe45-",
                "personNo": "deba4899ff644fa9b7ee3589372ffe45",
                "url": "http://172.18.199.16:38095/group1/default/20200325/13/40/1/1585114811949?download=0"
            }
        ]
    }
}
```

**失败返回示例:**

```
{
    "flag": false,
    "message": "Base64编码错误或图片原始数据错误或特征图片都为空",
    "data": null
}
```

## 7.6.人证比对

**接口描述:**  

`用于比对多张图片中的人脸相似度并返回两两比对的相似度，可用于判断两张脸是否是同一人的可能性大小。`

`使用场景:人证识别,用户认证`  

**调用URL:** 

`http://172.18.233.118:9012/aicp/face/couple `

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:数组参数**  

| 参数名 | 类型   | 是否必选 | 参数说明         |
| ------ | ------ | -------- | ---------------- |
| imageA | String | 是       | 图片A Base64编码 |
| imageB | String | 是       | 图片B Base64编码 |

**请求报文示例:**

``` json
{
				"imageA": "图片A Base64编码",
                "imageB": "图片B Base64编码"
}

```

**调用示例:**

``` json
curl -X "POST" "http://172.18.233.118:9012/InteractiveAbility/face/personwitnessratio" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{
				"imageA": "图片A Base64编码",
                "imageB": "图片B Base64编码"
}'

```

**返回值描述:**

| 参数名  | 类型       | 参数说明             |
| ------- | ---------- | -------------------- |
| flag    | boolean    | 成功失败标识         |
| message | String     | 成功或异常描述信息   |
| data    | json对象   | 人脸返回结果描述     |
| msg     | String     | 识别结果: ok是一个人 |
| score   | BigDecimal | 相似度               |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": {
        "msg": "ok",
        "score": "89.74037"
    }
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "Base64编码错误或图片原始数据错误或特征图片都为空",
    "data": null
}

```

## 7.7.人脸删除

**接口描述:**  

`根据人员分组和人员id删除人脸底库中的人脸信息`  

**调用URL:** 
`http://172.18.233.118:9012/aicp/face/remove`

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名  | 类型   | 是否必选 | 参数说明     |
| ------- | ------ | -------- | ------------ |
| groupId | String | 是       | 分组id       |
| userId  | String | 是       | 待删除人员id |

**请求报文示例:**

``` json
{
	"groupId":"分组id",
	"userId":"用户id"
}
```

**调用示例:**

``` json
curl -X POST \
  http://172.18.233.118:9012/aicp/face/remove \
  -H 'Content-Type: application/json' \
  -d '{
	"groupId":"分组id",
	"userId":"用户id"
}'
```

**返回值描述:**

| 参数名     | 类型     | 参数说明           |
| ---------- | -------- | ------------------ |
| flag       | boolean  | 成功失败标识       |
| resultCode | Integer  | 返回结果代码       |
| message    | String   | 成功或异常描述信息 |
| data       | json对象 | 接口返回数据       |
| request    | String   | 成功标识           |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": {
        "request": "Request successful"
    }
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "人脸库[200000]删除人脸[7885743058546360320]错误,错误信息[人脸不存在]",
    "data": null
}
```



## 7.8.人脸查询

**接口描述:**  

`根据人员分组和人员id信息查询对应的人员图片信息`  

**调用URL:** 
`http://172.18.233.118:9012/aicp/face/query`

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名  | 类型   | 是否必选 | 参数说明   |
| ------- | ------ | -------- | ---------- |
| groupId | String | 是       | 用户分组id |
| userId  | String | 是       | 用户id     |

**请求报文示例:**

``` json
{
	"groupId":"填写分组id",
	"userId":"填写用户id"
}
```

**调用示例:**

``` json
curl -X POST \
  http://172.18.233.118:9012/aicp/face/query \
  -H 'Content-Type: application/json' \
  -d '{
	"groupId":"分组id",
	"userId":"用户id"
}'
```

**返回值描述:**

| 参数名    | 类型     | 参数说明           |
| --------- | -------- | ------------------ |
| flag      | boolean  | 成功失败标识       |
| message   | String   | 成功或异常描述信息 |
| data      | json对象 | 接口响应数据       |
| faceDBURL | String   | 人脸图片url地址    |
| personID  | String   | 用户id             |

**成功返回示例:**

```json
{
    "flag": true,
    "message": "系统处理正常",
    "data": {
        "faceDBURL": "http://172.18.233.118:9012/face/getimage?app_id=system&app_secret=12345&groupId=200000&faceId=55",
        "personID": "7885746467177529344",
        "faceId": "55"
    }
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "查询人脸错误,错误信息[record not found]",
    "data": null
}
```



## 7.9.图片质量检测

**接口描述:**  

`对图片中人脸的质量进行检测，返回质量评分`  

**调用URL:** 
`http://172.18.233.118:9012/aicp/face/quality`

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名 | 类型   | 是否必选 | 参数说明                                |
| ------ | ------ | -------- | --------------------------------------- |
| image  | String | 是       | 图片Base64编码,编码后的图片大小不超过2M |

**请求报文示例:**

``` json
{ 
	"image": "图片Base64编码"
}
```

**调用示例:**

``` shell
curl -X "POST" "172.18.233.118:9012/aicp/face/quality" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "image": "图片Base64编码" 
		}'
```

**返回值描述:**

| 参数名      | 类型       | 参数说明                        |
| ----------- | ---------- | ------------------------------- |
| flag        | boolean    | 成功失败标识                    |
| resultCode  | Integer    | 结果返回代码                    |
| message     | String     | 成功或异常描述信息              |
| data        | json对象   | 接口返回数据                    |
| qualityFlag | String     | 图片质量是否合格：Y合格 N不合格 |
| qualities   | BigDecimal | 图片质量得分                    |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": {
        "qualityFlag": "Y",
        "qualities": [
            1,
            1,
            0,
            0,
            0
        ]
    }
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "80018,extract feature decode pictrue! get feature failed",
    "data": null
}
```



## 7.10.人脸检测

**接口描述:**  

`检测人脸信息`  

**调用URL:** 
`http://172.18.233.118:9012/aicp/face/detect`

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名 | 类型   | 是否必选 | 参数说明                                |
| ------ | ------ | -------- | --------------------------------------- |
| image  | String | 是       | 图片Base64编码,编码后的图片大小不超过2M |

**请求报文示例:**

``` json
{ 
	"image": "图片Base64编码"
}
```

**调用示例:**

``` shell
curl -X "POST" "172.18.233.118:9012/aicp/face/detect" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "image": "图片Base64编码" 
		}'
```

**返回值描述:**

| 参数名     | 类型         | 参数说明           |
| ---------- | ------------ | ------------------ |
| flag       | boolean      | 成功失败标识       |
| resultCode | Integer      | 结果返回代码       |
| message    | String       | 成功或异常描述信息 |
| data       | json对象     | 接口返回数据       |
| records    | Object[]数组 | 返回结果数组       |
| width      | Integer      | 头像框宽           |
| x          | Integer      | 头像x轴起点        |
| y          | Integer      | 头像y轴起点        |
| height     | Integer      | 头像框高           |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": {
        "records": [
            [
                {
                    "width": 166,
                    "x": 87,
                    "y": 49,
                    "height": 216
                }
            ]
        ]
    }
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "80018,extract feature decode pictrue! get feature failed",
    "data": null
}
```



## 7.11.人脸M:N

**接口描述:**  

`检测人脸信息`  

**调用URL:** 
`http://172.18.233.118:9012/aicp/face/recognitionmn`

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名  | 类型   | 是否必选 | 参数说明                                |
| ------- | ------ | -------- | --------------------------------------- |
| image   | String | 是       | 图片Base64编码,编码后的图片大小不超过2M |
| groupId | String | 否       | 人员分组id                              |

**请求报文示例:**

``` json
{ 
	"image": "图片Base64编码",
    "groupId":"20000"
}
```

**调用示例:**

``` shell
curl -X "POST" "172.18.233.118:9012/aicp/face/recognitionmn" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "image": "图片Base64编码"
     		"groupId":"20000"
		}'
```

**返回值描述:**

| 参数名     | 类型         | 参数说明           |
| ---------- | ------------ | ------------------ |
| flag       | boolean      | 成功失败标识       |
| resultCode | Integer      | 结果返回代码       |
| message    | String       | 成功或异常描述信息 |
| data       | json对象     | 接口返回数据       |
| records    | Object[]数组 | 返回结果数组       |
| score      | Float        | 相似度             |
| id         | String       | 编号               |
| faceId     | String       | 人脸图片ID         |
| personNo   | String       | 人员编号           |
| url        | String       | 图片url地址        |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": {
        "records": [
            [
                {
                    "score": 100.0,
                    "id": "1586394103831187000",
                    "faceId": "koala-deba4899ff644fa9b7ee3589372ffe45-",
                    "personNo": "deba4899ff644fa9b7ee3589372ffe45",
                    "url": "http://172.18.199.16:38095/group1/default/20200325/13/40/1/1585114811949?download=0"
                }
            ]
        ]
    }
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "80018,extract feature decode pictrue! get feature failed",
    "data": null
}
```

# 8.微服务运营模块API

## 8.1 运营服务总次数查询

**接口描述:**  

`查询运营服务的总次数`  

**调用URL:** 
`http://172.18.233.118:9013/method/call`

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名     | 类型   | 是否必选 | 参数说明       |
| ---------- | ------ | -------- | -------------- |
| call_Name  | String | 否       | 调用方法名称   |
| timeBefore | String | 否       | 查询时间（前） |
| timeAfter  | String | 否       | 查询时间（后） |

**请求报文示例:**

``` json
{ 
	"call_Name":"人脸识别",
	"timeBefore":"2020-01-01",
	"timeAfter":"2020-03-03"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.233.118:9013/method/call" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "call_Name":"人脸识别",
			"timeBefore":"2020-01-01",
			"timeAfter":"2020-03-03" 
		}'
```

**返回值描述:**

| 参数名      | 类型     | 参数说明              |
| ----------- | -------- | --------------------- |
| flag        | boolean  | 成功失败标识          |
| resultCode  | int      | 结果代码              |
| message     | String   | 提示信息              |
| data        | Object[] | 返回数据数组          |
| traceId     | String   | 唯一标识              |
| username    | String   | 用户名                |
| visitIp     | String   | 访问者的IP            |
| visitTime   | String   | 访问时间              |
| visitDesc   | String   | 访问描述              |
| visitUrl    | String   | 访问的URL路径         |
| costTime    | bigint   | 服务的处理时长        |
| visitResult | String   | 访问结果  0成功,1失败 |
| visitCode   | String   | 访问结果代码          |
| visitMsg    | String   | 访问结果的提示信息    |
| visitSource | String   | 访问源                |
| methodName  | String   | 方法名                |
| callCount   | String   | 方法调用次数          |
| end         | String   | 结束时间              |
| day         | String   | 第几天                |
| begin       | String   | 开始时间              |
| total       | String   | 总天数                |
| count       | String   | 方法调用总次数        |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": [
        {
            "traceId": null,
            "username": null,
            "visitIp": null,
            "visitTime": null,
            "visitDesc": null,
            "visitUrl": null,
            "costTime": 851,
            "visitResult": null,
            "visitCode": null,
            "visitMsg": "人脸识别",
            "visitSource": "人脸识别(云从)",
            "methodName": "faceRecognition",
            "callCount": null,
            "end": null,
            "day": "2020-04-15 15:38:03",
            "begin": null,
            "total": null,
            "count": "17"
        },
        {
            "traceId": null,
            "username": null,
            "visitIp": null,
            "visitTime": null,
            "visitDesc": null,
            "visitUrl": null,
            "costTime": 1037,
            "visitResult": null,
            "visitCode": null,
            "visitMsg": "人证对比",
            "visitSource": "人脸识别(云从)",
            "methodName": "personWitnessRatio",
            "callCount": null,
            "end": null,
            "day": "2020-04-13 13:32:24",
            "begin": null,
            "total": null,
            "count": "1"
        }
    ]
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "运行时出错!",
    "data": null
}
```

## 8.2 运营服务方法调用次数按日查询

**接口描述:**  

`查询运营服务按日统计的次数`  

**调用URL:** 
`http://172.18.233.118:9013/method/call/getMethodCountByDay`

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名     | 类型   | 是否必选 | 参数说明       |
| ---------- | ------ | -------- | -------------- |
| call_Name  | String | 否       | 调用方法名称   |
| timeBefore | String | 否       | 查询时间（前） |
| timeAfter  | String | 否       | 查询时间（后） |

**请求报文示例:**

``` json
{ 
	"call_Name":"人脸识别",
	"timeBefore":"2020-01-01",
	"timeAfter":"2020-03-03"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.233.118:9013/method/call/getMethodCountByDay" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "call_Name":"人脸识别",
			"timeBefore":"2020-01-01",
			"timeAfter":"2020-03-03" 
		}'
```

**返回值描述:**

| 参数名      | 类型     | 参数说明              |
| ----------- | -------- | --------------------- |
| flag        | boolean  | 成功失败标识          |
| resultCode  | int      | 结果代码              |
| message     | String   | 提示信息              |
| data        | Object[] | 返回数据数组          |
| traceId     | String   | 唯一标识              |
| username    | String   | 用户名                |
| visitIp     | String   | 访问者的IP            |
| visitTime   | String   | 访问时间              |
| visitDesc   | String   | 访问描述              |
| visitUrl    | String   | 访问的URL路径         |
| costTime    | bigint   | 服务的处理时长        |
| visitResult | String   | 访问结果  0成功,1失败 |
| visitCode   | String   | 访问结果代码          |
| visitMsg    | String   | 访问结果的提示信息    |
| visitSource | String   | 访问源                |
| methodName  | String   | 方法名                |
| callCount   | String   | 方法调用次数          |
| end         | String   | 结束时间              |
| day         | String   | 第几天                |
| begin       | String   | 开始时间              |
| total       | String   | 总天数                |
| count       | String   | 方法调用总次数        |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": [
        {
            "traceId": null,
            "username": null,
            "visitIp": null,
            "visitTime": null,
            "visitDesc": null,
            "visitUrl": null,
            "costTime": 3485,
            "visitResult": null,
            "visitCode": null,
            "visitMsg": "人脸识别",
            "visitSource": "人脸识别(云从)",
            "methodName": "faceRecognition",
            "callCount": null,
            "end": "2020-04-16",
            "day": "2020-04-15~~~2020-04-16",
            "begin": "2020-04-15",
            "total": null,
            "count": "17"
        },
        {
            "traceId": null,
            "username": null,
            "visitIp": null,
            "visitTime": null,
            "visitDesc": null,
            "visitUrl": null,
            "costTime": 1037,
            "visitResult": null,
            "visitCode": null,
            "visitMsg": "人证对比",
            "visitSource": "人脸识别(云从)",
            "methodName": "personWitnessRatio",
            "callCount": null,
            "end": "2020-04-14",
            "day": "2020-04-13~~~2020-04-14",
            "begin": "2020-04-13",
            "total": null,
            "count": "1"
        }
    ]
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "运行时出错!",
    "data": null
}
```

## 8.3 运营服务方法调用次数按周查询

**接口描述:**  

`查询运营服务按周统计的次数`  

**调用URL:** 
`http://172.18.233.118:9013/method/call/getMethodCountByWeek`

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名     | 类型   | 是否必选 | 参数说明       |
| ---------- | ------ | -------- | -------------- |
| call_Name  | String | 否       | 调用方法名称   |
| timeBefore | String | 否       | 查询时间（前） |
| timeAfter  | String | 否       | 查询时间（后） |

**请求报文示例:**

``` json
{ 
	"call_Name":"人脸识别",
	"timeBefore":"2020-01-01",
	"timeAfter":"2020-03-03"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.233.118:9013/method/call/getMethodCountByWeek" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "call_Name":"人脸识别",
			"timeBefore":"2020-01-01",
			"timeAfter":"2020-03-03" 
		}'
```

**返回值描述:**

| 参数名      | 类型     | 参数说明              |
| ----------- | -------- | --------------------- |
| flag        | boolean  | 成功失败标识          |
| resultCode  | int      | 结果代码              |
| message     | String   | 提示信息              |
| data        | Object[] | 返回数据数组          |
| traceId     | String   | 唯一标识              |
| username    | String   | 用户名                |
| visitIp     | String   | 访问者的IP            |
| visitTime   | String   | 访问时间              |
| visitDesc   | String   | 访问描述              |
| visitUrl    | String   | 访问的URL路径         |
| costTime    | bigint   | 服务的处理时长        |
| visitResult | String   | 访问结果  0成功,1失败 |
| visitCode   | String   | 访问结果代码          |
| visitMsg    | String   | 访问结果的提示信息    |
| visitSource | String   | 访问源                |
| methodName  | String   | 方法名                |
| callCount   | String   | 方法调用次数          |
| end         | String   | 结束时间              |
| day         | String   | 第几天                |
| begin       | String   | 开始时间              |
| total       | String   | 总天数                |
| count       | String   | 方法调用总次数        |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": [
        {
            "traceId": null,
            "username": null,
            "visitIp": null,
            "visitTime": null,
            "visitDesc": null,
            "visitUrl": null,
            "costTime": 3485,
            "visitResult": null,
            "visitCode": null,
            "visitMsg": "人脸识别",
            "visitSource": "人脸识别(云从)",
            "methodName": "faceRecognition",
            "callCount": null,
            "end": "2020-04-19",
            "day": "2020-04-13~~~2020-04-19",
            "begin": "2020-04-13",
            "total": null,
            "count": "17"
        },
        {
            "traceId": null,
            "username": null,
            "visitIp": null,
            "visitTime": null,
            "visitDesc": null,
            "visitUrl": null,
            "costTime": 1037,
            "visitResult": null,
            "visitCode": null,
            "visitMsg": "人证对比",
            "visitSource": "人脸识别(云从)",
            "methodName": "personWitnessRatio",
            "callCount": null,
            "end": "2020-04-19",
            "day": "2020-04-13~~~2020-04-19",
            "begin": "2020-04-13",
            "total": null,
            "count": "1"
        }
    ]
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "运行时出错!",
    "data": null
}
```

## 8.4 运营服务方法调用次数按月查询

**接口描述:**  

`查询运营服务按月统计的次数`  

**调用URL:** 
`http://172.18.233.118:9013/method/call/getMethodCountByMonth`

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名     | 类型   | 是否必选 | 参数说明       |
| ---------- | ------ | -------- | -------------- |
| call_Name  | String | 否       | 调用方法名称   |
| timeBefore | String | 否       | 查询时间（前） |
| timeAfter  | String | 否       | 查询时间（后） |

**请求报文示例:**

``` json
{ 
	"call_Name":"人脸识别",
	"timeBefore":"2020-01-01",
	"timeAfter":"2020-03-03"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.233.118:9013/method/call/getMethodCountByMonth" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "call_Name":"人脸识别",
			"timeBefore":"2020-01-01",
			"timeAfter":"2020-03-03" 
		}'
```

**返回值描述:**

| 参数名      | 类型     | 参数说明              |
| ----------- | -------- | --------------------- |
| flag        | boolean  | 成功失败标识          |
| resultCode  | int      | 结果代码              |
| message     | String   | 提示信息              |
| data        | Object[] | 返回数据数组          |
| traceId     | String   | 唯一标识              |
| username    | String   | 用户名                |
| visitIp     | String   | 访问者的IP            |
| visitTime   | String   | 访问时间              |
| visitDesc   | String   | 访问描述              |
| visitUrl    | String   | 访问的URL路径         |
| costTime    | bigint   | 服务的处理时长        |
| visitResult | String   | 访问结果  0成功,1失败 |
| visitCode   | String   | 访问结果代码          |
| visitMsg    | String   | 访问结果的提示信息    |
| visitSource | String   | 访问源                |
| methodName  | String   | 方法名                |
| callCount   | String   | 方法调用次数          |
| end         | String   | 结束时间              |
| day         | String   | 第几天                |
| begin       | String   | 开始时间              |
| total       | String   | 总天数                |
| count       | String   | 方法调用总次数        |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": [
        {
            "traceId": null,
            "username": null,
            "visitIp": null,
            "visitTime": null,
            "visitDesc": null,
            "visitUrl": null,
            "costTime": 3485,
            "visitResult": null,
            "visitCode": null,
            "visitMsg": "人脸识别",
            "visitSource": "人脸识别(云从)",
            "methodName": "faceRecognition",
            "callCount": null,
            "end": "2020-04-30",
            "day": "2020-04-01~~~2020-04-30",
            "begin": "2020-04-01",
            "total": null,
            "count": "17"
        },
        {
            "traceId": null,
            "username": null,
            "visitIp": null,
            "visitTime": null,
            "visitDesc": null,
            "visitUrl": null,
            "costTime": 1037,
            "visitResult": null,
            "visitCode": null,
            "visitMsg": "人证对比",
            "visitSource": "人脸识别(云从)",
            "methodName": "personWitnessRatio",
            "callCount": null,
            "end": "2020-04-30",
            "day": "2020-04-01~~~2020-04-30",
            "begin": "2020-04-01",
            "total": null,
            "count": "1"
        }
    ]
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "运行时出错!",
    "data": null
}
```

## 8.5 运营服务方法调用次数按日查询(图表)

**接口描述:**  

`查询运营服务按日统计的次数(图表)`  

**调用URL:** 
`http://172.18.233.118:9013/method/call/getChartByDay`

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名 | 类型   | 是否必选 | 参数说明   |
| ------ | ------ | -------- | ---------- |
| time   | String | 否       | 年份和月份 |


**请求报文示例:**

``` json
{
	"time":"2020-02"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.233.118:9013/method/call/getChartByDay" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "time":"2020-02" 
		}'
```

**返回值描述:**

| 参数名      | 类型     | 参数说明              |
| ----------- | -------- | --------------------- |
| flag        | boolean  | 成功失败标识          |
| resultCode  | int      | 结果代码              |
| message     | String   | 提示信息              |
| data        | Object[] | 返回数据数组          |
| traceId     | String   | 唯一标识              |
| username    | String   | 用户名                |
| visitIp     | String   | 访问者的IP            |
| visitTime   | String   | 访问时间              |
| visitDesc   | String   | 访问描述              |
| visitUrl    | String   | 访问的URL路径         |
| costTime    | bigint   | 服务的处理时长        |
| visitResult | String   | 访问结果  0成功,1失败 |
| visitCode   | String   | 访问结果代码          |
| visitMsg    | String   | 访问结果的提示信息    |
| visitSource | String   | 访问源                |
| methodName  | String   | 方法名                |
| callCount   | String   | 方法调用次数          |
| end         | String   | 结束时间              |
| day         | String   | 第几天                |
| begin       | String   | 开始时间              |
| total       | String   | 总天数                |
| count       | String   | 方法调用总次数        |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": [
        [
            {
                "traceId": null,
                "username": null,
                "visitIp": null,
                "visitTime": null,
                "visitDesc": null,
                "visitUrl": null,
                "costTime": 3485,
                "visitResult": null,
                "visitCode": null,
                "visitMsg": "人脸识别",
                "visitSource": "人脸识别(云从)",
                "methodName": "faceRecognition",
                "callCount": null,
                "end": null,
                "day": "2020-04-15",
                "begin": null,
                "total": "30",
                "count": "17"
            }
        ],
        [
            {
                "traceId": null,
                "username": null,
                "visitIp": null,
                "visitTime": null,
                "visitDesc": null,
                "visitUrl": null,
                "costTime": 1037,
                "visitResult": null,
                "visitCode": null,
                "visitMsg": "人证对比",
                "visitSource": "人脸识别(云从)",
                "methodName": "personWitnessRatio",
                "callCount": null,
                "end": null,
                "day": "2020-04-13",
                "begin": null,
                "total": "30",
                "count": "1"
            }
        ]
    ]
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "运行时出错!",
    "data": null
}
```

## 8.6 运营服务方法调用次数按月查询(图表)

**接口描述:**  

`查询运营服务按月统计的次数(图表)`  

**调用URL:** 
`http://172.18.233.118:9013/method/call/getChartByMonth`

**调用方法:**  

`post`

**请求Header:**

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| token  | String | 是       | token    |

**请求参数:**  

| 参数名 | 类型   | 是否必选 | 参数说明 |
| ------ | ------ | -------- | -------- |
| year   | String | 否       | 年份     |

**请求报文示例:**

``` json
{ 
	"year":"2020"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.233.118:9013/method/call/getChartByMonth" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "year":"2020"
		}'
```

**返回值描述:**

| 参数名      | 类型     | 参数说明              |
| ----------- | -------- | --------------------- |
| flag        | boolean  | 成功失败标识          |
| resultCode  | int      | 结果代码              |
| message     | String   | 提示信息              |
| data        | Object[] | 返回数据数组          |
| traceId     | String   | 唯一标识              |
| username    | String   | 用户名                |
| visitIp     | String   | 访问者的IP            |
| visitTime   | String   | 访问时间              |
| visitDesc   | String   | 访问描述              |
| visitUrl    | String   | 访问的URL路径         |
| costTime    | bigint   | 服务的处理时长        |
| visitResult | String   | 访问结果  0成功,1失败 |
| visitCode   | String   | 访问结果代码          |
| visitMsg    | String   | 访问结果的提示信息    |
| visitSource | String   | 访问源                |
| methodName  | String   | 方法名                |
| callCount   | String   | 方法调用次数          |
| end         | String   | 结束时间              |
| day         | String   | 第几天                |
| begin       | String   | 开始时间              |
| total       | String   | 总天数                |
| count       | String   | 方法调用总次数        |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": [
        [
            {
                "traceId": null,
                "username": null,
                "visitIp": null,
                "visitTime": null,
                "visitDesc": null,
                "visitUrl": null,
                "costTime": 3485,
                "visitResult": null,
                "visitCode": null,
                "visitMsg": "人脸识别",
                "visitSource": "人脸识别(云从)",
                "methodName": "faceRecognition",
                "callCount": null,
                "end": null,
                "day": "2020-04",
                "begin": null,
                "total": null,
                "count": "17"
            }
        ],
        [
            {
                "traceId": null,
                "username": null,
                "visitIp": null,
                "visitTime": null,
                "visitDesc": null,
                "visitUrl": null,
                "costTime": 1037,
                "visitResult": null,
                "visitCode": null,
                "visitMsg": "人证对比",
                "visitSource": "人脸识别(云从)",
                "methodName": "personWitnessRatio",
                "callCount": null,
                "end": null,
                "day": "2020-04",
                "begin": null,
                "total": null,
                "count": "1"
            }
        ]
    ]
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "运行时出错!",
    "data": null
}
```

## 8.7 运营服务时长查询

**接口描述:**  

`查询运营服务的时长`  

**调用URL:** 
`http://172.18.233.118:9013/method/call/all`

**调用方法:**  

`post`

**请求参数:**  

| 参数名     | 类型   | 是否必选 | 参数说明       |
| ---------- | ------ | -------- | -------------- |
| call_Name  | String | 否       | 调用方法名称   |
| timeBefore | String | 否       | 查询时间（前） |
| timeAfter  | String | 否       | 查询时间（后） |

**请求报文示例:**

``` json
{ 
	"call_Name":"人脸识别",
	"timeBefore":"2020-01-01",
	"timeAfter":"2020-03-03"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.233.118:9013/method/call/all" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "call_Name":"人脸识别",
			"timeBefore":"2020-01-01",
			"timeAfter":"2020-03-03" 
		}'
```

**返回值描述:**

| 参数名      | 类型     | 参数说明              |
| ----------- | -------- | --------------------- |
| flag        | boolean  | 成功失败标识          |
| resultCode  | int      | 结果代码              |
| message     | String   | 提示信息              |
| data        | Object[] | 返回数据数组          |
| traceId     | String   | 唯一标识              |
| username    | String   | 用户名                |
| visitIp     | String   | 访问者的IP            |
| visitTime   | String   | 访问时间              |
| visitDesc   | String   | 访问描述              |
| visitUrl    | String   | 访问的URL路径         |
| costTime    | bigint   | 服务的处理时长        |
| visitResult | String   | 访问结果  0成功,1失败 |
| visitCode   | String   | 访问结果代码          |
| visitMsg    | String   | 访问结果的提示信息    |
| visitSource | String   | 访问源                |
| methodName  | String   | 方法名                |
| callCount   | String   | 方法调用次数          |
| end         | String   | 结束时间              |
| day         | String   | 第几天                |
| begin       | String   | 开始时间              |
| total       | String   | 总天数                |
| count       | String   | 方法调用总次数        |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": [
        {
            "traceId": null,
            "username": null,
            "visitIp": null,
            "visitTime": null,
            "visitDesc": null,
            "visitUrl": null,
            "costTime": 851,
            "visitResult": null,
            "visitCode": null,
            "visitMsg": "人脸识别",
            "visitSource": "人脸识别(云从)",
            "methodName": "faceRecognition",
            "callCount": null,
            "end": null,
            "day": "2020-04-15 15:38:03",
            "begin": null,
            "total": null,
            "count": "1"
        },
        {
            "traceId": null,
            "username": null,
            "visitIp": null,
            "visitTime": null,
            "visitDesc": null,
            "visitUrl": null,
            "costTime": 1037,
            "visitResult": null,
            "visitCode": null,
            "visitMsg": "人证对比",
            "visitSource": "人脸识别(云从)",
            "methodName": "personWitnessRatio",
            "callCount": null,
            "end": null,
            "day": "2020-04-13 13:32:24",
            "begin": null,
            "total": null,
            "count": "1"
        }
    ]
}
```

**失败返回示例:**

```json
{
    "flag": false,
    "message": "运行时出错!",
    "data": null
}
```



# 9.华铭考拉接口API

## 9.1 用户组管理接口

### 9.1.1 创建用户组

**接口描述:**  

`创建一个空的用户组，如果用户组已存在 则返回错误。`

**调用url:**  

`http://172.18.199.14:9012/face-api/v3/group/add`

**调用方法:**  

`post`

**请求参数:**  

| 参数名   | 类型   | 是否必选 | 参数说明  |
| -------- | ------ | -------- | --------- |
| group_id | String | 是       | group标识 |

**请求报文示例:**

``` json
{
    "group_id": "group1"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.199.14:9012/face-api/v3/group/add" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "group_id":"group1"
		}'
```

**返回值描述:**

| 参数名     | 类型   | 参数说明         |
| ---------- | ------ | ---------------- |
| error_code | int    | 成功失败标志     |
| error_msg  | String | 成功失败信息     |
| log_id     | int    | 日志ID           |
| timestamp  | long   | 请求到达的时间戳 |
| cached     | int    | 未启用 无需处理  |
| result     | array  | 返回结果         |

**成功返回示例:**

```json
{
    "error_code": 0,
    "error_msg": "SUCCESS",
    "log_id": 1234567890123,
    "timestamp": 1533094781,
    "cached": 0,
    "result": null
}
```

**失败返回示例:**

```json
{
   
}
```

### 9.1.2 删除用户组

**接口描述:**  

`删除一个用户组`

**调用url:**  

`http://172.18.199.14:9012/face-api/v3/group/delete`

**调用方法:**  

`post`

**请求参数:**  

| 参数名   | 类型   | 是否必选 | 参数说明  |
| -------- | ------ | -------- | --------- |
| group_id | String | 是       | group标识 |

**请求报文示例:**

``` json
{
    "group_id": "group1"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.199.14:9012/face-api/v3/group/delete" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "group_id":"group1"
		}'
```

**返回值描述:**

| 参数名     | 类型   | 参数说明         |
| ---------- | ------ | ---------------- |
| error_code | int    | 成功失败标志     |
| error_msg  | String | 成功失败信息     |
| log_id     | int    | 日志ID           |
| timestamp  | long   | 请求到达的时间戳 |
| cached     | int    | 未启用 无需处理  |
| result     | array  | 返回结果         |

**成功返回示例:**

```json
{
    "error_code": 0,
    "error_msg": "SUCCESS",
    "log_id": 20200528140346,
    "timestamp": 1590645827197,
    "cached": 0,
    "result": null
}
```

**失败返回示例:**

```json
{
   
}
```

###  9.1.3 组列表

**接口描述:**  

`获取用户组列表`

**调用url:**  

`http://172.18.199.14:9012/face-api/v3/group/list`

**调用方法:**  

`post`

**请求参数:**  

| 参数名 | 类型 | 是否必选 | 参数说明                        |
| ------ | ---- | -------- | ------------------------------- |
| start  | 否   | int      | 默认值0，起始序号               |
| length | 否   | int      | 返回数量，默认值100，最大值1000 |

**请求报文示例:**

``` json
{
      "start": 0,
      "length": 100
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.199.14:9012/face-api/v3/group/list" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "start": 0,
      	"length": 100
		}'
```

**返回值描述:**

| 参数名        | 类型   | 参数说明         |
| ------------- | ------ | ---------------- |
| error_code    | int    | 成功失败标志     |
| error_msg     | String | 成功失败信息     |
| log_id        | int    | 日志ID           |
| timestamp     | long   | 请求到达的时间戳 |
| cached        | int    | 未启用 无需处理  |
| result        | array  | 返回结果         |
| group_id_list | array  | group的list      |

**成功返回示例:**

```json
{
    "error_code": 0,
    "error_msg": "SUCCESS",
    "log_id": 20200528141036,
    "timestamp": 1590646236468,
    "cached": 0,
    "result": {
        "group_id_list": [
            "group2",
            "group3"
        ]
    }
}
```

**失败返回示例:**

```json
{
   
}
```

###  9.1.4 查询人脸组数量

**接口描述:**  

`查询人脸组的数量。`

**调用url:**  

`http://172.18.199.14:9012/face-api/facehub/statapp`

**调用方法:**  

`post`

**请求参数:**  

| 参数名         | 类型   | 是否必选 | 参数说明 |
| -------------- | ------ | -------- | -------- |
| op_app_id_list | String | 否       | applist  |

**请求报文示例:**

``` json
{
    
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.199.14:9012/face-api/facehub/statapp" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ 
		}'
```

**返回值描述:**

| 参数名    | 类型   | 参数说明     |
| --------- | ------ | ------------ |
| appid1    | String | 成功失败标志 |
| group_num | int    | 用户组数量   |

**成功返回示例:**

```json
{
    "appid1": {
        "group_num": 2
    }
}
```

**失败返回示例:**

```json
{
   
}
```

### 9.1.5 批量获取组统计信息

**接口描述:**  

`获取组信息。`

**调用url:**  

`http://172.18.199.14:9012/face-api/facehub/statgroup`

**调用方法:**  

`post`

**请求参数:**  

| 参数名         | 类型   | 是否必选 | 参数说明                               |
| -------------- | ------ | -------- | -------------------------------------- |
| op_app_id_list | String | 否       | applist                                |
| group_id_list  | string | 是       | groupid列表 多个按`,`分隔 **限制20个** |

**请求报文示例:**

``` json
{
    "group_id_list":"group2,group3"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.199.14:9012/face-api/facehub/statgroup" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "group_id_list":"group2,group3"
		}'
```

**返回值描述:**

| 参数名   | 类型   | 参数说明 |
| -------- | ------ | -------- |
| user_num | int    | 用户数量 |
| face_num | int    | 人脸数量 |
| ctime    | String | 创建时间 |

**成功返回示例:**

```json
{
    "group3": {
        "user_num": 1,
        "face_num": 0,
        "ctime": "2020-05-27 14:37:23"
    },
    "group2": {
        "user_num": 1,
        "face_num": 0,
        "ctime": "2020-05-27 14:37:23"
    }
}
```

**失败返回示例:**

```json
{
   
}
```

## 9.2 用户管理接口

### 9.2.1 复制用户

**接口描述:**  

`将已经存在于人脸库中的用户复制到一个新的组`

**调用url:**  

`http://172.18.199.14:9012/face-api/v3/user/copy`

**调用方法:**  

`post`

**请求参数:**  

| 参数名       | 类型   | 是否必选 | 参数说明                                        |
| ------------ | ------ | -------- | ----------------------------------------------- |
| user_id      | String | 是       | 用户id（由数字、字母、下划线组成），长度限制48B |
| src_group_id | String | 是       | 从指定group里复制 长度限制48B                   |
| dst_group_id | String | 是       | 需要添加用户的组id 长度限制48B                  |

**请求报文示例:**

``` json
{
      "user_id": "234",
      "src_group_id": "group2",
      "dst_group_id": "group3"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.199.14:9012/face-api/v3/user/copy" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "user_id": "234",
      "src_group_id": "group2",
      "dst_group_id": "group3"
		}'
```

**返回值描述:**

| 参数名     | 类型   | 参数说明         |
| ---------- | ------ | ---------------- |
| error_code | int    | 成功失败标志     |
| error_msg  | String | 成功失败信息     |
| log_id     | int    | 日志ID           |
| timestamp  | long   | 请求到达的时间戳 |
| cached     | int    | 未启用 无需处理  |
| result     | array  | 返回结果         |

**成功返回示例:**

```json
{
    "error_code": 0,
    "error_msg": "SUCCESS",
    "log_id": 1234567890123,
    "timestamp": 1533094781,
    "cached": 0,
    "result": null
}
```

**失败返回示例:**

```json
{
   
}
```

### 9.2.2 获取用户信息

**接口描述:**  

`获取人脸库中某个用户的信息(user_info信息和用户所属的组)`

**调用url:**  

`http://172.18.199.14:9012/face-api/v3/user/get`

**调用方法:**  

`post`

**请求参数:**  

| 参数名   | 类型   | 是否必选 | 参数说明                                                     |
| -------- | ------ | -------- | ------------------------------------------------------------ |
| user_id  | String | 是       | 用户id（由数字、字母、下划线组成），长度限制48B              |
| group_id | String | 是       | 用户组id(由数字、字母、下划线组成，长度限制48B) 如传入**@ALL**则从所有组中查询用户信息 |

**请求报文示例:**

``` json
 {
      "user_id": "123",
      "group_id": "group3"
  }
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.199.14:9012/face-api/v3/user/get" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{  "user_id": "123",
      "group_id": "group3"
		}'
```

**返回值描述:**

| 参数名     | 类型   | 参数说明                                        |
| ---------- | ------ | ----------------------------------------------- |
| error_code | int    | 成功失败标志                                    |
| error_msg  | String | 成功失败信息                                    |
| log_id     | int    | 日志ID                                          |
| timestamp  | long   | 请求到达的时间戳                                |
| cached     | int    | 未启用 无需处理                                 |
| result     | array  | 返回结果                                        |
| user_list  | array  | 用户信息                                        |
| id         | String | Id                                              |
| groupId    | String | 用户所属的group_id                              |
| userId     | String | 用户id（由数字、字母、下划线组成），长度限制48B |
| userName   | String | 用户姓名                                        |
| userInfo   | String | 用户信息                                        |
| createTime | Date   | 创建时间                                        |

**成功返回示例:**

```json
{
    "error_code": 0,
    "error_msg": "SUCCESS",
    "log_id": 20200529152024,
    "timestamp": 1590736824588,
    "cached": 0,
    "result": {
        "user_list": [
            {
                "id": "1",
                "groupId": "group3",
                "userId": "123",
                "userName": "abc",
                "userInfo": "abc",
                "createTime": "2020-05-27 14:37:23"
            },
            {
                "id": "3",
                "groupId": "group3",
                "userId": "123",
                "userName": "fdf",
                "userInfo": "fdfs",
                "createTime": "2020-05-27 14:37:23"
            }
        ]
    }
}
```

**失败返回示例:**

```json
{
   
}
```

### 9.2.3 用户列表

**接口描述:**  

`获取用户组中的用户列表`

**调用url:**  

`http://172.18.199.14:9012/face-api/v3/user/list`

**调用方法:**  

`post`

**请求参数:**  

| 参数名   | 类型   | 是否必选 | 参数说明                        |
| -------- | ------ | -------- | ------------------------------- |
| group_id | String | 是       | 用户组ID                        |
| start    | String | 否       | 默认值0，起始序号               |
| length   | String | 否       | 返回数量，默认值100，最大值1000 |

**请求报文示例:**

``` json
{
	"group_id": "group3"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.199.14:9012/face-api/v3/user/list" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "group_id": "group3"
		}'
```

**返回值描述:**

| 参数名     | 类型   | 参数说明                                        |
| ---------- | ------ | ----------------------------------------------- |
| error_code | int    | 成功失败标志                                    |
| error_msg  | String | 成功失败信息                                    |
| log_id     | int    | 日志ID                                          |
| timestamp  | long   | 请求到达的时间戳                                |
| cached     | int    | 未启用 无需处理                                 |
| result     | array  | 返回结果                                        |
| user_list  | array  | 用户信息                                        |
| id         | String | Id                                              |
| groupId    | String | 用户所属的group_id                              |
| userId     | String | 用户id（由数字、字母、下划线组成），长度限制48B |
| userName   | String | 用户姓名                                        |
| userInfo   | String | 用户信息                                        |
| createTime | Date   | 创建时间                                        |

**成功返回示例:**

```json
{
    "error_code": 0,
    "error_msg": "SUCCESS",
    "log_id": 20200529153503,
    "timestamp": 1590737703123,
    "cached": 0,
    "result": {
        "user_id_list": [
            {
                "id": "1",
                "groupId": "group3",
                "userId": "123",
                "userName": "abc",
                "userInfo": "abc",
                "createTime": "2020-05-27 14:37:23"
            },
            {
                "id": "2",
                "groupId": "group3",
                "userId": "234",
                "userName": "acc",
                "userInfo": "acc",
                "createTime": "2020-05-29 15:24:54"
            },
            {
                "id": "3",
                "groupId": "group3",
                "userId": "123",
                "userName": "fdf",
                "userInfo": "fdfs",
                "createTime": "2020-05-27 14:37:23"
            }
        ]
    }
}
```

**失败返回示例:**

```json
{
   
}
```

# 10 通用模块

## 10.1 用户注册

**接口描述:**  

`用户注册接口`

**调用url:**  

`http://172.18.199.14:9013/user/register`

**调用方法:**  

`post`

**请求参数:**  

| 参数名    | 类型   | 是否必选 | 参数说明     |
| --------- | ------ | -------- | ------------ |
| username  | String | 是       | 用户名       |
| password  | String | 是       | 用户密码     |
| telephone | String | 是       | 手机号       |
| mail      | String | 是       | 邮箱         |
| deptId    | String | 是       | 用户部门ID   |
| image     | String | 是       | 图片base64码 |

**请求报文示例:**

``` json
{
	"username":"azd1",
	"password":"123456",
	"telephone":"13940312121",
	"mail":"abc@126.com",
	"deptId":"123",
    "image":"图片BASE64编码"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.199.14:9013/user/register" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "username":"azd1",
	"password":"123456",
	"telephone":"13940312121",
	"mail":"abc@126.com",
	"deptId":"123",
    "image":"图片BASE64编码"
		}'
```

**返回值描述:**

| 参数名     | 类型    | 参数说明     |
| ---------- | ------- | ------------ |
| flag       | boolean | 成功失败标志 |
| resultCode | Integer | 成功失败代码 |
| message    | String  | 返回信息     |
| data       | Array   | 返回数组     |
| personNo   | String  | 人脸编号     |
| url        | String  | 人脸url      |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": {
        "personNo": "b4eae03c6c1e43848bc7a194ff9e9893",
        "url": "http://172.18.199.16:38095/group1/default/20200422/14/20/1/1587536411181?download=0"
    }
}
```

**失败返回示例:**

```json
{
   
}
```

## 10.2 刷脸登录

**接口描述:**  

`用户注册接口`

**调用url:**  

`http://172.18.199.14:9013/user/facelogin.json`

**调用方法:**  

`post`

**请求参数:**  

| 参数名 | 类型   | 是否必选 | 参数说明     |
| ------ | ------ | -------- | ------------ |
| image  | String | 是       | 图片base64码 |

**请求报文示例:**

``` json
{
    "image":"图片BASE64编码"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.199.14:9013/user/facelogin.json" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{ "image":"图片BASE64编码"
		}'
```

**返回值描述:**

| 参数名     | 类型    | 参数说明     |
| ---------- | ------- | ------------ |
| flag       | boolean | 成功失败标志 |
| resultCode | Integer | 成功失败代码 |
| message    | String  | 返回信息     |
| data       | Array   | 返回数组     |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": "/pages/index.html"
}
```

**失败返回示例:**

```json
{
    "timestamp": "2020-06-02",
    "status": 500,
    "error": "Internal Server Error",
    "message": "人脸识别未通过",
    "path": "/user/facelogin.json"
}
```



# 11 高可用模块

## 11.1 高可用查询

**接口描述:**  

`高可用查询接口`

**调用url:**  

`http://172.18.199.14:9013/asynchrony/getall`

**调用方法:**  

`post`

**请求参数:**  

| 参数名     | 类型   | 是否必选 | 参数说明                               |
| ---------- | ------ | -------- | -------------------------------------- |
| issolved   | String | 否       | 是否异常(0为异常,1为正常,不传查询所有) |
| timeBefore | String | 否       | 查询时间（前）                         |
| timeAfter  | String | 否       | 查询时间（后）                         |

**请求报文示例:**

``` json
{
    "issolved":"0",
    "timeBefore":"2020-03-28 16:04:45",
    "timeAfter":"2020-06-30 16:04:45"
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.199.14:9013/asynchrony/getall" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{
    "issolved":"0",
    "timeBefore":"2020-03-28 16:04:45",
    "timeAfter":"2020-06-30 16:04:45"
}'
```

**返回值描述:**

| 参数名             | 类型    | 参数说明                       |
| ------------------ | ------- | ------------------------------ |
| flag               | boolean | 成功失败标志                   |
| resultCode         | Integer | 成功失败代码                   |
| message            | String  | 返回信息                       |
| data               | Array   | 返回数组                       |
| total              | String  | 总条数                         |
| totalpage          | String  | 总页数                         |
| items              | Array   | 返回数组数据                   |
| id                 | String  | 主键                           |
| dataGroupId        | String  | 人员分组id                     |
| dataPersonId       | String  | 人员id                         |
| dataImageAddress   | String  | 人脸图片地址                   |
| createTime         | Date    | 异常数据产生时间               |
| operateType        | String  | 方法路径                       |
| engineUrl          | String  | 引擎地址                       |
| solveTime          | String  | 解决时间                       |
| issolved           | String  | 解决标志（0为未解决，1为解决） |
| solveManCode       | String  | 解决人                         |
| jsonParam          | Json    | body参数                       |
| asynchronyDataList | String  | 高可用数组                     |

**成功返回示例:**

```json
{
     "flag": true,
    "resultCode": 0,
    "message": "系统处理正常",
    "data": {
        "total": 1,
        "totalPage": 1,
        "items": [
            {
                "id": "7965492027098472448",
                "dataGroupId": "952900b306d9469f9e2ef3140723fba0",
                "dataPersonId": "7965492025999564800",
                "dataImageAddress": "/aisata/AIhome/wangjn_bj/data/highAvailability/picture/\\20200628\\7965492025999564800.jpg",
                "createTime": "2020-06-28 16:05:04",
                "operateType": "business/api/v1/repository/personDb",
                "engineUrl": "http://172.18.199.32:39081/",
                "solveTime": "2020-06-28 16:18:00",
                "issolved": 1,
                "solveManCode": null,
                "jsonParam": "{\"personLibId\":\"952900b306d9469f9e2ef3140723fba0\",\"baseLs\":BASE64}",
                 "asynchronyDataList": null
}
```

**失败返回示例:**

```json
{
   
}
```

## 11.2 高可用恢复

**接口描述:**  

`高可用恢复接口`

**调用url:**  

`http://172.18.199.14:9013/asynchrony/resumedata`

**调用方法:**  

`post`

**请求参数:**  

| 参数名             | 类型                 | 是否必选 | 参数说明             |
| ------------------ | -------------------- | -------- | -------------------- |
| asynchronyDataList | List<AsynchronyData> | 是       | AsynchronyData的List |

**请求报文示例:**

``` json
{
    "asynchronyDataList":[{ "id": "7966116984054816768",
                "dataGroupId": "e1fd10ef39494931a66963d1cce3d2e8",
                "dataPersonId": "7966116983740243968",
                "dataImageAddress": "/aisata/AIhome/wangjn_bj/data/highAvailability/picture//20200630/7966116983740243968.jpg",
                "createTime": "2020-06-30 09:28:26",
                "operateType": "business/api/v1/repository/personDb",
                "engineUrl": "http://172.18.199.32:39081/",
                "solveTime": null,
                "issolved": 0,
                "solveManCode": null,
                "jsonParam": "{\"personLibId\":\"e1fd10ef39494931a66963d1cce3d2e8\",\"baseLs\":BASE64}"}]
}
```

**调用示例:**

``` shell
curl -X "POST" "http://172.18.199.14:9013/asynchrony/resumedata" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{
   "asynchronyDataList":[{ "id": "7966116984054816768",
                "dataGroupId": "e1fd10ef39494931a66963d1cce3d2e8",
                "dataPersonId": "7966116983740243968",
                "dataImageAddress": "/aisata/AIhome/wangjn_bj/data/highAvailability/picture//20200630/7966116983740243968.jpg",
                "createTime": "2020-06-30 09:28:26",
                "operateType": "business/api/v1/repository/personDb",
                "engineUrl": "http://172.18.199.32:39081/",
                "solveTime": null,
                "issolved": 0,
                "solveManCode": null,
                "jsonParam": "{\"personLibId\":\"e1fd10ef39494931a66963d1cce3d2e8\",\"baseLs\":BASE64}"}]
}'
```

**返回值描述:**

| 参数名     | 类型    | 参数说明     |
| ---------- | ------- | ------------ |
| flag       | boolean | 成功失败标志 |
| resultCode | Integer | 成功失败代码 |
| message    | String  | 返回信息     |
| data       | Array   | 返回数组     |

**成功返回示例:**

```json
{
    "flag": true,
    "resultCode": 0,
    "message": "异常数据恢复成功",
    "data": null
}
```

**失败返回示例:**

```json
{
   
}
```

## 